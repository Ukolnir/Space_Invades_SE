{"version":3,"sources":["src/sprite.js","src/bullet.js","src/ship.js","src/alien.js","src/input-handler.js","src/level.js","src/gift.js","src/conf.js","src/game.js","src/index.js","node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["Sprite","img","x","y","w","h","Bullet","vx","vy","sprite","cnvsB","cnvsL","cnvsR","isAlive","time","bottom","left","right","ctx","sp","drawImage","Ship","sprites","bulSprites","_sprites","_bulSprites","hp","mode","fig","undefined","type","value","Math","max","min","height","b1x","b2x","center","step","t","ceil","Alien","timeMark","cnvsH","apply","map","timeLastFire","difHP","shift","InputHandler","down","pressed","document","addEventListener","e","keyCode","code","Level","typeLevel","countAlien","alienHP","movementSpeedVX","movementSpeedVY","alienSprites","bulletSprite","mark","isEnd","isCDbyAlien","allAliens","aliens","idx","lastTick","tempYforBoss","attackBoss","tempSpeedVXforBoss","rand","random","floor","typeForm","k","length","i","alienX","alienY","push","getMark","randomX","ret","slice","tempXforBoss","bullet","alienIsReady","filter","alienFire","forEach","bulX","bulY","alienInjured","isInjured","boss","bul1X","bul2X","move","shipLeft","shipRight","lastIdx","concat","top","moveAlien","context","a","draw","Gift","config","levels","typeAliens","typeBullet","assetShip","assetsAliens","ship","bulletsShip","bulletsAliens","gift","gameState","startRun","cnvsBorder","bullets","bulletsAlien","nextLevel","numberLevel","startGame","gameOver","playerWin","score","scoreLastBonus","bonus","catchedBonus","onPressedKey","levelLoop","window","location","reload","inputHandler","preload","nextInit","Image","src","assetAlienPath","assetShipPath","initGame","canvas","width","level","alSp","constructorLevel","update","stopGame","isDown","isPressed","shoot","g","intersects","trimMode","b","getAlien","drawSwitchLevel","getContext","font","fillStyle","fillText","drawWin","drawGameOver","clearRect","beginPath","strokeStyle","moveTo","lineTo","closePath","stroke","drawAlien","getElementById","innerWidth","innerHeight","tickLength","lastRender","stopCycle","run","tFrame","requestAnimationFrame","nextTick","numTicks","timeSinceTick","cancelAnimationFrame","onPreloadComplete","performance","now","drawGameStart","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","event","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","d","dep","Array","isArray","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["export default class Sprite {\n  constructor(img, x, y, w, h) {\n    this.img = img;\n  \tthis.x = x;\n  \tthis.y = y;\n  \tthis.w = w;\n  \tthis.h = h;\n  }\n}\n","export default class Bullet {\n  constructor(x, y, vx, vy, sprite, cnvsB, cnvsL, cnvsR) {\n    this.x = x;\n  \tthis.y = y;\n\t\tthis.vx = vx;\n  \tthis.vy = vy;\n  \tthis.w = sprite.w;\n  \tthis.h = sprite.h;\n  \tthis.sprite = sprite;\n\t\tthis.cnvsB = cnvsB;\n\t\tthis.isAlive = true;\n\t\tthis.cnvsL = cnvsL;\n\t\tthis.cnvsR = cnvsR;\n  }\n\n  update(time) {\n\t\tif(this.bottom() < this.cnvsB && this.y > 0 \n\t\t\t&& this.left() > this.cnvsL \n\t\t\t&& this.right() < this.cnvsR) {\n\t\t\t\tthis.y += this.vy;\n\t\t\t\tthis.x += this.vx;\n\t\t} else {\n\t\t\tthis.isAlive = false;\n\t\t}\n  }\n\n  draw(ctx) {\n\tlet sp = this.sprite;\n    ctx.drawImage(\n      sp.img,\n      sp.x, sp.y, sp.w, sp.h,\n      this.x, this.y, sp.w, sp.h\n    );\n  }\n  \n  left(){\n\t\treturn this.x;  \n  }\n  \n  right(){\n\t\treturn this.x + this.w;  \n  }\n  \n  top(){\n\t\treturn this.y;\n  }\n  \n  bottom(){\n\t\treturn this.y + this.h;  \n  }\n}","import Bullet from './bullet'\n\nexport default class Ship {\n  constructor(x, y, sprites, bulSprites, cnvsL, cnvsR) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis._sprites = sprites;\n\t\tthis._bulSprites = bulSprites;\n\t\tthis.w = sprites[0].w;\n\t\tthis.h = sprites[0].h;\n\t\tthis.cnvsL = cnvsL;\n\t\tthis.cnvsR = cnvsR;\n\t\tthis.hp = 2;\n\t\t\n\t\tthis.mode = 0;\n  }\n  \n\tisAlive(){\n\t\treturn this.hp > 0;\n\t}\n\t\n  left(){\n\treturn this.x;  \n  }\n  \n  right(){\n\treturn this.x + this.w;  \n  }\n  \n  top(){\n\treturn this.y;\n  }\n  \n  bottom(){\n\treturn this.y + this.h;  \n  }\n  \n  center(){\n\t  return this.x + this.w/2;\n  }\n  \n  intersects(fig) {\n\t\tif(\n\t\t\tthis.y < fig.bottom()\n\t\t\t&& this.x < fig.right()\n      && fig.x < this.right()\n      && (fig.y < this.bottom())\n\t\t){\n\t\t\tthis.hp-=1;\n\t\t\tif(fig.hp === undefined)\n\t\t\t\tfig.isAlive = false;\n\t\t\telse\n\t\t\t\tfig.hp = fig.type != 3 ? 0 : fig.hp;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n  }\n  \n\ttrimMode(value){\n\t\tthis.mode = value < 0 ? Math.max(this.mode+value, 0) : Math.min(this.mode+value, 5);\n\t}\n\t\n\tshoot(height){\n\t\tconst b1x = this.left() + 5;\n\t\tconst b2x = this.right()- 5 - this._bulSprites[2].w;\n\t\tswitch(this.mode) {\n\t\t\tcase 0:\n\t\t\t\treturn [new Bullet(this.center() - this._bulSprites[2].w / 2, this.y, 0, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR)];\n\t\t\tcase 1:\n\t\t\t\treturn [\n\t\t\t\t\tnew Bullet(b1x, this.y, 0, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b2x, this.y, 0, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR)\n\t\t\t\t];\n\t\t\tcase 2:\n\t\t\t\treturn [\n\t\t\t\t\tnew Bullet(this.center() - this._bulSprites[2].w / 2, this.y, 0, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b1x, this.y, -1, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b2x, this.y, 1, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR)\n\t\t\t\t];\n\t\t\tcase 3:\n\t\t\t\treturn [\n\t\t\t\t\tnew Bullet(this.center() - this._bulSprites[3].w / 2, this.y, 0, -8, this._bulSprites[3], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b1x, this.y, -1, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b2x, this.y, 1, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR)\n\t\t\t\t];\n\t\t\tcase 4:\n\t\t\t\treturn [\n\t\t\t\t\tnew Bullet(this.center() - this._bulSprites[3].w / 2, this.y, 0, -8, this._bulSprites[3], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b1x, this.y, -1, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b2x, this.y, 1, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b1x, this.y, -2, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b2x, this.y, 2, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR)\n\t\t\t\t];\n\t\t\tcase 5:\n\t\t\t\treturn [\n\t\t\t\t\tnew Bullet(this.center() - this._bulSprites[3].w / 2, this.y, 0, -8, this._bulSprites[3], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b1x, this.y, -1, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b2x, this.y, 1, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b1x, this.y, -2, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b2x, this.y, 2, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b1x, this.y, -3, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b2x, this.y, 3, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR)\n\t\t\t\t];\n\t\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n  move(step){\n\tif(step < 0 && this.x + step <= this.cnvsL \n\t|| step > 0 && this.right() + step >= this.cnvsR) return;\n\tthis.x += step;\n  }\n  \n  draw(ctx, time) {\n\tconst t = Math.ceil(time / 500) % 4;\n\tlet sp = t === 3 ? this._sprites[1] : this._sprites[t];\n\t\t  \n    ctx.drawImage(\n      sp.img,\n      sp.x, sp.y, sp.w, sp.h,\n      this.x, this.y, sp.w, sp.h\n    );\n  }\n}\n","export default class Alien {\n  constructor(x, y, vx, vy, hp, type, sprites, timeMark, cnvsL, cnvsR, cnvsH) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.type = type;\n\t\tthis.vx = vx;\n\t\tthis.vy = vy;\n\t\tthis._sprites = sprites;\n\t\tthis.w = Math.max.apply(Math, sprites.map(x=>x.w));\n\t\tthis.h = Math.max.apply(Math, sprites.map(x=>x.h));\n\t\tthis.timeMark = timeMark;\n\t\tthis.timeLastFire = 0;\n\t\tthis.hp = hp;\n\t\tthis.difHP = hp;\n\t\tthis.cnvsL = cnvsL;\n\t\tthis.cnvsR = cnvsR;\n\t\tthis.cnvsH = cnvsH;\n  }  \n\t\n\tisAlive(){\n\t\treturn this.hp > 0;\n\t}\n\t\n  left(){\n\t\treturn this.x;  \n  }\n  \n  top() {\n\t\treturn this.y;  \n  }\n\n  right(){\n\t\treturn this.x + this.w;  \n  }\n  \n  bottom(){\n\t\treturn this.y + this.h;  \n  }\n\t  \n  alienFire(time){\n\t  if (Math.ceil(time / 100) % 60 === this.timeMark\n\t  && time - this.timeLastFire > 2000){ //????\n\t\tthis.timeLastFire = time;\n\t\treturn true;\n\t  }\n\t  return false;\n  }\n  \n\tisInjured(){\n\t\tif(this.difHP > this.hp){\n\t\t\tthis.difHP = this.hp;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\t\n  intersects(fig) {\n\t\tif(\n\t\t\tthis.y < fig.bottom()\n\t\t\t&& this.x < fig.right()\n            && fig.x < this.right()\n            && (fig.y < this.bottom())\n\t\t){\n\t\t\tthis.hp-=1;\n\t\t\tif(fig.hp === undefined)\n\t\t\t\tfig.isAlive = false;\n\t\t\telse \n\t\t\t\tfig.hp-=1;\n\t\t\t\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n  }\n  \n  center(){\n\t\treturn this.x + this.w / 2;\n  }\n  \n  move(){\n\t\tif(this.x <= this.cnvsL || this.right() >= this.cnvsR)\n\t\t\tthis.vx = -this.vx;\n\t\tif(this.bottom() >= this.cnvsH && this.type != 3){\n\t\t\tthis.hp = 0;\n\t\t\treturn;\n\t\t}\n\t\tthis.x += this.vx;\n\t\tthis.y += this.vy;\n  }\t\n\t\n  draw(ctx, time) {\n\tconst t = Math.ceil(time / 500) % 4;\n\tlet sp;\n\tswitch (this.type){\n\t\tcase 0:\n        case 3:\n\t\t\tsp = t === 3 ? this._sprites[1] : this._sprites[t];\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tsp = this._sprites[t % 2];\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tconst shift = this.vx > 0 ? 3 : 0;\n\t\t\tsp = t === 3 ? this._sprites[shift + 1] : this._sprites[shift + t];\n\t\t\tbreak;\n\t}\n\t\t\n    ctx.drawImage(\n      sp.img,\n      sp.x, sp.y, sp.w, sp.h,\n      this.x, this.y, sp.w, sp.h\n    );\n  }\n}\n","export default class InputHandler {\n  constructor() {\n    this.down = {};\n  \tthis.pressed = {};\n  \tdocument.addEventListener(\"keydown\", e => {\n  \t\tthis.down[e.keyCode] = true;\n  \t});\n  \tdocument.addEventListener(\"keyup\", e => {\n  \t\tdelete this.down[e.keyCode];\n  \t\tdelete this.pressed[e.keyCode];\n  \t});\n  }\n\n  /**\n   * Returns whether a key is pressod down\n   * @param  {number} code the keycode to check\n   * @return {bool} the result from check\n   */\n  isDown(code) {\n  \treturn this.down[code];\n  }\n\n  /**\n   * Return wheter a key has been pressed\n   * @param  {number} code the keycode to check\n   * @return {bool} the result from check\n   */\n  isPressed(code) {\n  \t// if key is registred as pressed return false else if\n  \t// key down for first time return true else return false\n  \tif (this.pressed[code]) {\n  \t\treturn false;\n  \t} else if (this.down[code]) {\n  \t\treturn this.pressed[code] = true;\n  \t}\n  \treturn false;\n  }\n}\n","import Alien from './alien'\nimport Bullet from './bullet'\n\nexport default class Level {\n\tconstructor(typeLevel,\n\tcountAlien,\n\talienHP,\n\tmovementSpeedVX,\n\tmovementSpeedVY,\n\talienSprites,\n\tbulletSprite,\n\tcnvsL,\n\tcnvsR,\n\tcnvsH){\n\t\tthis.typeLevel = typeLevel;\n\t\tthis.countAlien = countAlien; \n\t\tthis.alienHP = alienHP; \n\t\tthis.movementSpeedVX = movementSpeedVX;\n\t\tthis.movementSpeedVY = movementSpeedVY;\n\t\tthis.alienSprites = alienSprites;\n\t\tthis.bulletSprite = bulletSprite;\n\t\tthis.mark = 0;\n\t\tthis.cnvsL = cnvsL;\n\t\tthis.cnvsR = cnvsR;\n\t\tthis.cnvsH = cnvsH;\n\t\tthis.isEnd = false;\n\n\t\tthis.isCDbyAlien = typeLevel == \"falling\" || typeLevel == \"snake\" || typeLevel == \"boss\";\n\n\t\tthis.allAliens = [];\n\t\tthis.aliens = [];\n\n\t\tthis.idx = 0;\n\t\tthis.lastTick = 0;\n\t\t\n\t\tthis.tempYforBoss = 0;\n\t\tthis.attackBoss = false;\n\t\tthis.tempSpeedVXforBoss = 0;\n\t}\n\n\tgetMark(step = 17){\n\t\tthis.mark = (this.mark + step) % 60;\n\t\treturn this.mark;\n\t}\n\n\trandomX() {\n\t\tlet rand = this.cnvsL + Math.random() * ((this.cnvsR - 50) - this.cnvsL);\n\t\treturn Math.floor(rand);\n\t}\n\n\tconstructorLevel(){\n\t\tlet typeForm = 0;\n\t\tswitch(this.typeLevel){\n\t\t\tcase \"snake\":\n\t\t\t\ttypeForm = 2;\n\t\t\tcase \"formation\":\n\t\t\tfor (let k = 0; k < this.alienSprites.length; ++k){\n\t\t\t\tfor (let i = 0; i < this.countAlien; ++i){\n\t\t\t\t\tlet alienX = this.cnvsL + 40;\n\t\t\t\t\tlet alienY = 40 + (k*this.countAlien+i)*50;\n\t\t\t\t\twhile (alienX + 60 < this.cnvsR){\n\t\t\t\t\t\tthis.aliens.push(new Alien(alienX, alienY, this.movementSpeedVX, this.movementSpeedVY,\n\t\t\t\t\t\tthis.alienHP, typeForm, this.alienSprites[k], this.getMark(), this.cnvsL, this.cnvsR, this.cnvsH));\n\t\t\t\t\t\talienX+=50;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\n\t\t\tcase \"falling\":\n\t\t\tfor (let k = 0; k < this.alienSprites.length; ++k){\n\t\t\t\tfor (let i = 0; i < this.countAlien; ++i){\n\t\t\t\t\tlet alienX = this.randomX();\n\t\t\t\t\tlet alienY = 5;\n\t\t\t\t\tthis.allAliens.push(new Alien(alienX, alienY, this.movementSpeedVX, this.movementSpeedVY,\n\t\t\t\t\t\tthis.alienHP, 1, this.alienSprites[k], this.getMark(), this.cnvsL, this.cnvsR, this.cnvsH));\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet ret = this.randomX() % 10;\n\t\t\tthis.aliens = this.allAliens.slice(this.idx, this.idx + ret);\n\t\t\tthis.idx += ret;\n\t\t\tbreak;\n\n      case \"boss\":\n\t\t\tlet tempXforBoss = (this.cnvsL + this.cnvsR)/2;\n\t\t\tthis.tempYforBoss = this.cnvsH/4;\n      this.aliens.push(new Alien(tempXforBoss, this.tempYforBoss, this.movementSpeedVX, 0,\n\t\t\t\tthis.alienHP, 3, this.alienSprites[0], this.getMark(30), this.cnvsL, this.cnvsR, this.cnvsH));\n      break;\n\n\t\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tshoot(time){\n\t\tlet bullet = [];\n\n\t\tswitch(this.typeLevel){\n\t\t\tcase \"formation\":\n                let alienIsReady = this.aliens.filter(x=>x.alienFire(time));\n\t\t\t\talienIsReady.forEach(x=>{\n\t\t\t\t    const bulX = x.center();\n\t\t\t\t    const bulY = x.bottom();\n\t\t\t\t    bullet.push(new Bullet(bulX - this.bulletSprite.w / 2, bulY, 0, 8, this.bulletSprite, this.cnvsH, this.cnvsL, this.cnvsR));\n\t\t\t\t});\n\t\t\tbreak;\n\n\t\t\tcase \"falling\":\n\t\t\tbreak;\n\n\t\t\tcase \"snake\":\n\t\t\t\tlet alienInjured = this.aliens.filter(x=>x.isInjured());\n\t\t\t\talienInjured.forEach(x=>{\n\t\t\t\t\tconst bulX = x.center();\n\t\t\t\t\tconst bulY = x.bottom();\n\t\t\t\t\tbullet.push(new Bullet(bulX - this.bulletSprite.w / 2, bulY, 0, 8, this.bulletSprite, this.cnvsH, this.cnvsL, this.cnvsR));\n\t\t\t\t});\n\t\t\tbreak;\n\n      case \"boss\":\n\t\t\t\tif(this.aliens.length == 0) break;\n      \tlet boss = this.aliens[0];\n        const bul1X = boss.left();\n        const bul2X = boss.right() - this.bulletSprite.w;\n\t\t\t\tconst bulY = boss.bottom();\n        if(boss.alienFire(time) || boss.isInjured()){\n\t\t\t\t\tbullet.push(new Bullet(bul1X, bulY, 0, 8, this.bulletSprite, this.cnvsH, this.cnvsL, this.cnvsR));\n        \tbullet.push(new Bullet(bul2X, bulY, 0, 8, this.bulletSprite, this.cnvsH, this.cnvsL, this.cnvsR));\n        }\n      break;\n\t\t}\n\t\treturn bullet;\n\t}\n\n\tgetAlien(){\n\t\tthis.aliens = this.aliens.filter(x=>x.isAlive());\n\t\tif(this.typeLevel == \"falling\"){\n\t\t\tthis.isEnd = this.aliens.length == 0 && this.idx >= this.allAliens.length;\n\t\t}\n\t\telse\n\t\t\tthis.isEnd = this.aliens.length == 0;\n\t}\n\n\tmoveAlien(){\n\t\tif(this.typeLevel == \"boss\"){}\n\t\tthis.aliens.forEach(x => x.move());\n\t}\n\n\tupdate(time, shipLeft, shipRight){\n\t\tswitch(this.typeLevel){\n\t\t\tcase \"formation\":\n\t\t\tbreak;\n\t\t\tcase \"falling\":\n\t\t\t\tif(this.idx < this.allAliens.length && time - this.lastTick > 1000){\n\t\t\t\t\tlet ret = this.randomX() % 6 + 1;\n\t\t\t\t\tlet lastIdx = Math.min(this.allAliens.length, ret + this.idx);\n\t\t\t\t\tthis.aliens = this.aliens.concat(this.allAliens.slice(this.idx, lastIdx));\n\t\t\t\t\tthis.idx += ret;\n\t\t\t\t\tthis.lastTick = time;\n\t\t\t\t}\n\n\t\t\tbreak;\n      case \"boss\":\n\t\t\t\tlet boss = this.aliens[0];\n\t\t\t\tif(shipLeft <= boss.center() && boss.center() < shipRight && boss.y == this.tempYforBoss){\n\t\t\t\t\tthis.tempSpeedVXforBoss = boss.vx;\n\t\t\t\t\tthis.aliens[0].vx = 0;\n\t\t\t\t\tthis.aliens[0].vy = this.movementSpeedVY;\n\t\t\t\t\tthis.attackBoss = true; \n\t\t\t\t} else if(boss.bottom() >= this.cnvsH){\n\t\t\t\t\tthis.aliens[0].vx = 0;\n\t\t\t\t\tthis.aliens[0].vy = -this.movementSpeedVY;\n\t\t\t\t} else if(boss.top() < this.tempYforBoss && this.attackBoss){\n\t\t\t\t\tthis.aliens[0].y = this.tempYforBoss;\n\t\t\t\t\tthis.aliens[0].vx = this.tempSpeedVXforBoss;\n\t\t\t\t\tthis.aliens[0].vy = 0;\n\t\t\t\t\tthis.attackBoss = false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\t\tthis.moveAlien();\n\t}\n\n\tdrawAlien(context, time){\n\t\tthis.aliens.forEach(a => a.draw(context, time));\n\t}\n}\n","export default class Gift {\n\tconstructor(x, y, vy, sprite){\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.w = sprite.w;\n\t\tthis.h = sprite.h;\n\t\tthis.vy = vy;\n\t\tthis.sprite = sprite;\n\t\tthis.isAlive = true;\n\t}\n\t\n\tleft() {\n\t\treturn this.x;\n\t}\n\t\n\tright() {\n\t\treturn this.x + this.w;\n\t}\n\t\n\ttop() {\n\t\treturn this.y;\n\t}\n\t\n\tbottom() {\n\t\treturn this.y + this.h;\n\t}\n\t\n\tmove(cnvsB) {\n\t\tif(this.bottom() >= cnvsB)\n\t\t\tthis.isAlive = false;\n\t\telse\n\t\t\tthis.y += this.vy;\n\t}\n\t\n\tdraw(ctx) {\n    ctx.drawImage(\n      this.sprite.img,\n      this.sprite.x, this.sprite.y, this.w, this.h,\n      this.x, this.y, this.w, this.h\n    );\n  }\n\t\n\tintersects(fig) {\n\t\tif(\n\t\t\tthis.y < fig.bottom()\n\t\t\t&& this.x < fig.right()\n      && fig.x < this.right()\n      && (fig.y < this.bottom())\n\t\t){\n\t\t\tthis.isAlive = false;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n  }\n}","const config = {\n\tlevels: [\n\t//1\n\t{\n\t\ttypeLevel: \"formation\",\n\t\ttypeAliens: [0],\n\t\tcountAlien: 2,\n\t\tmovementSpeedVX: 1,\n\t\tmovementSpeedVY: 0,\n\t\talienHP: 1,\n\t\ttypeBullet: 0\n\t},\n\t//2\n\t{\n\t\ttypeLevel: \"formation\",\n\t\ttypeAliens: [0, 1],\n\t\tcountAlien: 2,\n\t\tmovementSpeedVX: 1,\n\t\tmovementSpeedVY: 0,\n\t\talienHP: 1,\n\t\ttypeBullet: 0\n\t},\n\t//3\n\t{\n\t\ttypeLevel: \"falling\",\n\t\ttypeAliens: [5],\n\t\tcountAlien: 60,\n\t\tmovementSpeedVX: 0,\n\t\tmovementSpeedVY: 8,\n\t\talienHP: 3,\n\t\ttypeBullet: 0\n\t},\n\t//4\n\t{\n\t\ttypeLevel: \"snake\",\n\t\ttypeAliens: [6],\n\t\tcountAlien: 2,\n\t\tmovementSpeedVX: 2,\n\t\tmovementSpeedVY: 0.2,\n\t\talienHP: 2,\n\t\ttypeBullet: 0\n\t},\n\t//5\t\n\t{\n\t\ttypeLevel: \"formation\",\n\t\ttypeAliens: [0, 1, 2],\n\t\tcountAlien: 2,\n\t\tmovementSpeedVX: 1,\n\t\tmovementSpeedVY: 0,\n\t\talienHP: 1,\n\t\ttypeBullet: 0\n\t},\n\t//6\t\n\t{\n\t\ttypeLevel: \"falling\",\n\t\ttypeAliens: [5, 3],\n\t\tcountAlien: 40,\n\t\tmovementSpeedVX: 0,\n\t\tmovementSpeedVY: 9,\n\t\talienHP: 3,\n\t\ttypeBullet: 0\n\t},\n\t//7\t\n\t{\n\t\ttypeLevel: \"snake\",\n\t\ttypeAliens: [6, 7],\n\t\tcountAlien: 3,\n\t\tmovementSpeedVX: 2.3,\n\t\tmovementSpeedVY: 0.2,\n\t\talienHP: 2,\n\t\ttypeBullet: 0\n\t},\n\t//8\t\n\t{\n\t\ttypeLevel: \"formation\",\n\t\ttypeAliens: [0, 1, 2],\n\t\tcountAlien: 3,\n\t\tmovementSpeedVX: 2,\n\t\tmovementSpeedVY: 0,\n\t\talienHP: 1,\n\t\ttypeBullet: 0\n\t},\n\t//9\t\n\t{\n\t\ttypeLevel: \"falling\",\n\t\ttypeAliens: [5, 3, 4],\n\t\tcountAlien: 30,\n\t\tmovementSpeedVX: 0,\n\t\tmovementSpeedVY: 10,\n\t\talienHP: 3,\n\t\ttypeBullet: 0\n\t},\n    //10\n\t{\n\t\ttypeLevel: \"boss\",\n\t\ttypeAliens: [8],\n\t\tcountAlien: 1,\n\t\tmovementSpeedVX: 3,\n\t\tmovementSpeedVY: 15,\n\t\talienHP: 35,\n\t\ttypeBullet: 1\n\t}\n\t]\n}\n\nexport { config };\n","import Sprite from './sprite'\nimport Ship from './ship'\nimport Bullet from './bullet'\nimport Alien from './alien'\nimport InputHandler from './input-handler'\nimport Level from './level'\nimport Gift from './gift'\n\nimport assetShipPath from '../assets/ship.png'\nimport assetAlienPath from '../assets/aliens.png'\n\nimport { config } from './conf'\n\nlet assetShip;\nlet assetsAliens;\n\nconst sprites = {\n  aliens: [],\n  ship: [],\n  bulletsShip: [],\n  bulletsAliens: [],\n\tgift: null\n};\nconst gameState = {\n  startRun: null,\n  cnvsBorder: 450,\n  bullets: [],\n  bulletsAlien: [],\n  aliens: [],\n  ship: null,\n  levels: [],\n  nextLevel: false,\n  numberLevel: 0,\n  startGame: true,\n  gameOver: false,\n\tplayerWin:false,\n\tscore: 0,\n\tscoreLastBonus: 0,\n\tbonus: [],\n\tcatchedBonus: 0\n};\n\nfunction onPressedKey(e){\n\tif(e.keyCode === 13){\n\t\tif(gameState.startGame){\n\t\t\tgameState.startGame = false;\n\t\t\tlevelLoop();\n\t\t\treturn;\n\t\t}\n\t\tif(gameState.nextLevel){\n\t\t\t\tgameState.numberLevel+=1;\n\t\t\t\tgameState.nextLevel = false;\n\t\t\t\tlevelLoop();\n\t\t\t\treturn;\n\t\t}\n\t\tif(gameState.playerWin || gameState.gameOver){\n\t\t\twindow.location.reload();\n\t\t}\n\t}\n}\n\nlet mark = 0;\nconst inputHandler = new InputHandler();\n\nexport function preload(nextInit){\n\tassetsAliens = new Image();\n\tassetsAliens.addEventListener(\"load\", () => {\n\t\n\tsprites.bulletsAliens = [\n\t\tnew Sprite(assetsAliens,  258, 20, 6, 16), new Sprite(assetsAliens,  279, 19, 11, 19)\n\t];\n\n\tsprites.aliens = [\n\t\t[new Sprite(assetsAliens,  2, 2, 47, 39), new Sprite(assetsAliens,  51, 2, 47, 39), new Sprite(assetsAliens,  99, 2, 44, 39)], //for 1, 2, 5, 8\n\t\t[new Sprite(assetsAliens,  1, 48, 47, 45), new Sprite(assetsAliens,  50, 48, 47, 45), new Sprite(assetsAliens,  98, 48, 44, 45)], // for 2, 5, 8\n\t\t[new Sprite(assetsAliens,  156, 146, 47, 45), new Sprite(assetsAliens,  204, 146, 47, 45), new Sprite(assetsAliens,  256, 146, 44, 45)], //for 5, 8 (complex)\n\t\t[new Sprite(assetsAliens,  152, 11, 47, 33), new Sprite(assetsAliens,  204, 11, 44, 33)], // for 6, 9\n\t\t[new Sprite(assetsAliens,  152, 53, 47, 33), new Sprite(assetsAliens,  204, 53, 44, 33)], // for 9\n\t\t[new Sprite(assetsAliens,  152, 93, 47, 33), new Sprite(assetsAliens,  204, 93, 44, 33)], // for 3, 6, 9\n\t\t[\n\t\t\tnew Sprite(assetsAliens,  10, 101, 37, 39), new Sprite(assetsAliens,  58, 101, 37, 39), new Sprite(assetsAliens,  12, 193, 37, 43), //for 4, 7\n\t\t\tnew Sprite(assetsAliens,  1, 148, 38, 40), new Sprite(assetsAliens,  53, 148, 38, 40), new Sprite(assetsAliens,  5, 241, 38, 43)\n\t\t], \n\t\t[\n\t\t\tnew Sprite(assetsAliens,  106, 101, 37, 39), new Sprite(assetsAliens,  61, 195, 37, 39), new Sprite(assetsAliens,  109, 195, 37, 43), //for 7\n\t\t\tnew Sprite(assetsAliens,  97, 147, 38, 40), new Sprite(assetsAliens,  56, 243, 38, 40), new Sprite(assetsAliens,  102, 243, 38, 43)\n\t\t],\n\t\t[new Sprite(assetsAliens,  306, 99, 92, 92), new Sprite(assetsAliens,  306, 191, 92, 92), new Sprite(assetsAliens,  306, 4, 92, 92)] // for 10\n    ]  \n  });\n  \n\tassetsAliens.src = assetAlienPath;\n  \n\tassetShip = new Image();\n\tassetShip.addEventListener(\"load\", () => {\n    sprites.ship = [new Sprite(assetShip, 2, 6, 55, 96), new Sprite(assetShip, 59, 6, 55, 96), new Sprite(assetShip, 117, 6, 55, 96)];\n    sprites.bulletsShip = [\n\t\tnew Sprite(assetShip, 178, 3, 5, 13), new Sprite(assetShip, 178, 18, 17, 14), \n\t\tnew Sprite(assetShip, 179, 35, 10, 17), new Sprite(assetShip, 178, 53, 23, 24)\n\t];\n\t\tsprites.gift = new Sprite(assetShip, 202, 46, 31, 34);\n\tnextInit();\n  });\n\tassetShip.src = assetShipPath;\n}\n\nexport function initGame(startRun, canvas) {\n\tgameState.cnvsBorder = ((canvas.width + 100) / 3 + 260)/2;\n\t\n\t//load levels\n\tconfig.levels.forEach(level => {\n\t\tlet alSp = [];\n\t\tlevel.typeAliens.forEach(x=>alSp.push(sprites.aliens[x]));\n\t\tgameState.levels.push(\n\t\tnew Level(level.typeLevel, level.countAlien, level.alienHP, \n\t\t\tlevel.movementSpeedVX, level.movementSpeedVY, alSp, sprites.bulletsAliens[level.typeBullet], \n\t\t\tcanvas.width/2 - gameState.cnvsBorder, canvas.width/2 + gameState.cnvsBorder, canvas.height));\n\t});\n\t\n\t//init ship\n\tgameState.ship = new Ship(\n\t\tcanvas.width/2 - gameState.cnvsBorder + 10, canvas.height - 200,\n\t\tsprites.ship, sprites.bulletsShip, canvas.width/2 - gameState.cnvsBorder, canvas.width/2 + gameState.cnvsBorder \n\t);\n\t\n\tgameState.startRun = startRun;\n\t\t\n\twindow.addEventListener('keydown', onPressedKey, true);\n}\n\nfunction levelLoop(){\n\tgameState.levels[gameState.numberLevel].constructorLevel();\n\tgameState.ship.hp += 1;\n\tgameState.bullets = [];\n\tgameState.bulletsAlien = [];\n\tgameState.bonus = [];\n\tgameState.startRun();\n}\n\nfunction randomX(cnvsL, cnvsR) {\n\t\tlet rand = cnvsL + Math.random() * ((cnvsR - 50) - cnvsL);\n\t\treturn Math.floor(rand);\n\t}\n\nexport function update(time, stopGame, canvas) {\n\tif (inputHandler.isDown(37)) { // Left\n\t\tgameState.ship.move(-4);\n\t}\n\n\tif (inputHandler.isDown(39)) { // Right\n\t\tgameState.ship.move(4);\n\t}\n\n\tif (inputHandler.isPressed(32)) { // Space\n\t\tgameState.bullets = gameState.bullets.concat(gameState.ship.shoot(canvas.height));\n\t}\n  \n\t\tif(gameState.scoreLastBonus != Math.floor(gameState.score / 70)){\n\t\tgameState.bonus.push(new Gift(\n\t\trandomX(canvas.width/2 - gameState.cnvsBorder, canvas.width/2 + gameState.cnvsBorder),\n\t\t40, 6, sprites.gift));\n\t\tgameState.scoreLastBonus = Math.floor(gameState.score / 70);\n\t}\n\t\n\tgameState.bonus.forEach(g=>{\n\t\tif(g.intersects(gameState.ship)){\n\t\t\tgameState.catchedBonus+=1;\n\t\t\tif(gameState.catchedBonus % 3 == 0)\n\t\t\t\tgameState.ship.trimMode(1);\n\t\t\tif(gameState.catchedBonus % 7 == 0)\n\t\t\t\tgameState.ship.hp+=1;\n\t\t}\n\t\tg.move(canvas.height);\n\t});\n\t\n\tlet level = gameState.levels[gameState.numberLevel];\n\t\n\tgameState.bulletsAlien = gameState.bulletsAlien.concat(level.shoot(time));\n\t\n  gameState.bullets.forEach(b => { \n\t\tb.update(time);\n\t\tlevel.aliens.forEach(x=>{\n\t\t\tif(x.intersects(b))\t\n\t\t\t\tgameState.score += 5;\n\t\t});\n  });\n  \n  level.getAlien();\n  \n\tif(level.isCDbyAlien){\n\t\tlevel.aliens.forEach(x=> {\n\t\t\tif(gameState.ship.intersects(x))\n\t\t\t\tgameState.ship.trimMode(-2);\n\t\t})\n\t}\n\t\t\n  gameState.bulletsAlien.forEach(b => { \n\t\tb.update(time);\n\t\tif(gameState.ship.intersects(b)){\n\t\t\tgameState.ship.trimMode(-1);\n\t\t};\n  });\n  \n  if (!gameState.ship.isAlive()){\n\t\tgameState.gameOver = true;\n\t\tstopGame();\n  }\n  \n   if (level.isEnd){\n\t   if(gameState.numberLevel+1 == gameState.levels.length){\n\t\t  gameState.playerWin = true; \n\t\t} else {\n\t\t\tgameState.nextLevel = true;\n\t\t\tstopGame();\n\t\t}\n   }\n  \n\tlevel.update(time, gameState.ship.left(), gameState.ship.right());\n\n  gameState.bulletsAlien = gameState.bulletsAlien.filter(b => b.isAlive);\n  gameState.bullets = gameState.bullets.filter(b => b.isAlive);\n\tgameState.bonus = gameState.bonus.filter(g => g.isAlive);\n}\n\nfunction drawSwitchLevel(canvas){\n\tconst context = canvas.getContext('2d');\n\tcontext.font = \"64px serif\";\n\tcontext.fillStyle = \"#FFFFFF\";\n\tcontext.fillText(\"Level \" + (gameState.numberLevel+2), canvas.width/2 - 110, canvas.height/2-150);\n\tcontext.font = \"48px serif\";\n\tcontext.fillText(\"Press Enter for start\", canvas.width/2 - 185, canvas.height/2);\n}\n\nfunction drawWin(canvas){\n\tconst context = canvas.getContext('2d');\n\tcontext.font = \"64px serif\";\n\tcontext.fillStyle = \"#FFFFFF\";\n\tcontext.fillText(\"Congratulation!\", canvas.width/2 - 200, canvas.height/2-150);\n\tcontext.fillText(\"You won\", canvas.width/2 - 120, canvas.height/2 - 70);\n\tcontext.font = \"48px serif\";\n\tcontext.fillText(\"Your score: \" + gameState.score, canvas.width/2 - 155, canvas.height/2 - 10);\n\tcontext.fillText(\"Press Enter for repeat\", canvas.width/2 - 200, canvas.height/2 + 80);\n}\n\nfunction drawGameOver(canvas){\n\tconst context = canvas.getContext('2d');\n\tcontext.font = \"64px serif\";\n\tcontext.fillStyle = \"#FFFFFF\";\n\tcontext.fillText(\"You died\", canvas.width/2 - 120, canvas.height/2 - 150);\n\tcontext.font = \"48px serif\";\n\tcontext.fillText(\"Your score: \" + gameState.score, canvas.width/2 - 155, canvas.height/2 - 90);\n\tcontext.fillText(\"Level: \" + (gameState.numberLevel+1), canvas.width/2 - 80, canvas.height/2 - 30);\n\tcontext.fillText(\"Press Enter for repeat\", canvas.width/2 - 200, canvas.height/2 + 60);\n}\n\nexport function draw(canvas, time) {\n  const context = canvas.getContext('2d');\n  context.clearRect(0, 0, canvas.width, canvas.height);\n\n\tif(gameState.nextLevel){\n\t\tdrawSwitchLevel(canvas);\n\t\treturn;\n\t}\n\t\n\tif(gameState.playerWin){\n\t\tdrawWin(canvas);\n\t\treturn;\n\t}\n\t\n\tif(gameState.gameOver){\n\t\tdrawGameOver(canvas);\n\t\treturn;\n\t}\n\t\n\tlet cnvsL = canvas.width/2 - gameState.cnvsBorder;\n\tlet cnvsR = canvas.width/2 + gameState.cnvsBorder;\n\t\n\t//borders\n\tcontext.beginPath();\n\tcontext.strokeStyle = \"#FFFFFF\";\n\tcontext.moveTo(cnvsL, 0);\n\tcontext.lineTo(cnvsL, canvas.height);\n\tcontext.moveTo(cnvsR, 0);\n\tcontext.lineTo(cnvsR, canvas.height);\n\tcontext.closePath();\n\tcontext.stroke();\n\t\n\t//info\n\tcontext.font = \"48px serif\";\n\tcontext.fillStyle = \"#FFFFFF\";\n\tcontext.fillText(\"Level \" + (gameState.numberLevel + 1), cnvsL/2 - 65, 150);\n\tcontext.font = \"40px serif\";\n\tcontext.fillText(\"Score \" + gameState.score, cnvsL/2 - 65, 200);\n\t\n\tcontext.drawImage(\n      sprites.gift.img,\n      sprites.gift.x, sprites.gift.y, sprites.gift.w, sprites.gift.h,\n      (cnvsR + canvas.width)/2 - sprites.gift.w - 10, canvas.height - 3*sprites.ship[0].h, sprites.gift.w, sprites.gift.h\n  );\n\t\n\tcontext.fillText(gameState.catchedBonus, (cnvsR + canvas.width)/2 + sprites.gift.w - 10, canvas.height - 2.65 * sprites.ship[0].h);\n\t\n\tcontext.drawImage(\n    sprites.ship[0].img,\n    sprites.ship[0].x, sprites.ship[0].y, sprites.ship[0].w, sprites.ship[0].h,\n    (cnvsR + canvas.width)/2 - sprites.ship[0].w + 1, canvas.height - 2*sprites.ship[0].h, sprites.ship[0].w, sprites.ship[0].h\n  );\n\t\n\tcontext.fillText(gameState.ship.hp, (cnvsR + canvas.width)/2 + sprites.gift.w - 10, canvas.height - 1.3 * sprites.ship[0].h);\n\t\n\t\n  gameState.levels[gameState.numberLevel].drawAlien(context, time);\n\tgameState.bonus.forEach(g => g.draw(context));\n  gameState.ship.draw(context, time);\n  gameState.bullets.forEach(b => b.draw(context));\n  gameState.bulletsAlien.forEach(b => b.draw(context));\n}\n","import {\n  preload,\n  initGame,\n  update,\n  draw\n} from './game'\n\nconst canvas = document.getElementById(\"cnvs\");\ncanvas.width = window.innerWidth;\ncanvas.height = window.innerHeight;\n\nconst tickLength = 15; //ms\nlet lastTick;\nlet lastRender;\nlet stopCycle;\n\nfunction run(tFrame) {\n    stopCycle = window.requestAnimationFrame(run);\n\n    const nextTick = lastTick + tickLength;\n    let numTicks = 0;\n\n    if (tFrame > nextTick) {\n        const timeSinceTick = tFrame - lastTick;\n        numTicks = Math.floor(timeSinceTick / tickLength);\n    }\n\n    for (let i = 0; i < numTicks; i++) {\n        lastTick = lastTick + tickLength;\n        update(lastTick, stopGame, canvas);\n    }\n\n    draw(canvas, tFrame);\n    lastRender = tFrame;\n}\n\nfunction stopGame() {\n   window.cancelAnimationFrame(stopCycle);\n}\n\nfunction onPreloadComplete() {\n  lastTick = performance.now();\n  lastRender = lastTick;\n  stopCycle = null;\n  run();\n}\n\nfunction drawGameStart(context){\n\tcontext.font = \"64px serif\";\n\tcontext.fillStyle = \"#FFFFFF\";\n\tcontext.fillText(\"Space Invaders\", canvas.width/2 - 195, canvas.height/2-170);\n\tcontext.font = \"48px serif\";\n\tcontext.fillText(\"(Special Edition)\", canvas.width/2 - 150, canvas.height/2 - 110);\n\tcontext.fillText(\"Press Enter for start\", canvas.width/2 - 185, canvas.height/2);\n}\n\nfunction nextInit(){\n\tdrawGameStart(canvas.getContext('2d'));\n\tinitGame(onPreloadComplete, canvas);\n}\n\npreload(nextInit);","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}