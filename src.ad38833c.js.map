{"version":3,"sources":["src/sprite.js","src/bullet.js","src/ship.js","src/alien.js","src/input-handler.js","src/level.js","src/gift.js","src/conf.js","src/game.js","src/index.js"],"names":["Sprite","img","x","y","w","h","Bullet","vx","vy","sprite","cnvsB","cnvsL","cnvsR","isAlive","time","bottom","left","right","ctx","sp","drawImage","Ship","sprites","bulSprites","_sprites","_bulSprites","hp","mode","fig","undefined","type","value","Math","max","min","height","b1x","b2x","center","step","t","ceil","Alien","timeMark","cnvsH","apply","map","timeLastFire","difHP","shift","InputHandler","down","pressed","document","addEventListener","e","keyCode","code","Level","typeLevel","countAlien","alienHP","movementSpeedVX","movementSpeedVY","alienSprites","bulletSprite","mark","isEnd","isCDbyAlien","allAliens","aliens","idx","lastTick","tempYforBoss","attackBoss","tempSpeedVXforBoss","rand","random","floor","typeForm","k","length","i","alienX","alienY","push","getMark","randomX","ret","slice","tempXforBoss","bullet","filter","alienFire","forEach","bulX","bulY","isInjured","boss","bul1X","bul2X","move","shipLeft","shipRight","lastIdx","concat","top","moveAlien","context","a","draw","Gift","config","levels","typeAliens","typeBullet","assetShip","assetsAliens","ship","bulletsShip","bulletsAliens","gift","gameState","startRun","cnvsBorder","bullets","bulletsAlien","nextLevel","numberLevel","startGame","gameOver","playerWin","score","scoreLastBonus","bonus","catchedBonus","onPressedKey","levelLoop","window","location","reload","inputHandler","preload","nextInit","Image","src","assetAlienPath","assetShipPath","initGame","canvas","width","level","alSp","constructorLevel","update","stopGame","isDown","isPressed","shoot","g","intersects","trimMode","b","getAlien","drawSwitchLevel","getContext","font","fillStyle","fillText","drawWin","drawGameOver","clearRect","beginPath","strokeStyle","moveTo","lineTo","closePath","stroke","drawAlien","getElementById","innerWidth","innerHeight","lastRender","stopCycle","tickLength","run","tFrame","requestAnimationFrame","nextTick","numTicks","timeSinceTick","cancelAnimationFrame","onPreloadComplete","performance","now","drawGameStart"],"mappings":";AAOG,aAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAPkBA,IAAAA,EACnB,SAAYC,EAAAA,EAAKC,EAAGC,EAAGC,EAAGC,GAAG,EAAA,KAAA,GACtBJ,KAAAA,IAAMA,EACPC,KAAAA,EAAIA,EACJC,KAAAA,EAAIA,EACJC,KAAAA,EAAIA,EACJC,KAAAA,EAAIA,GACT,QAAA,QAAA;;AC0CA,aAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAjDkBC,IAAAA,EAAAA,WACPJ,SAAAA,EAAAA,EAAGC,EAAGI,EAAIC,EAAIC,EAAQC,EAAOC,EAAOC,GAAO,EAAA,KAAA,GAChDV,KAAAA,EAAIA,EACLC,KAAAA,EAAIA,EACLI,KAAAA,GAAKA,EACJC,KAAAA,GAAKA,EACLJ,KAAAA,EAAIK,EAAOL,EACXC,KAAAA,EAAII,EAAOJ,EACXI,KAAAA,OAASA,EACVC,KAAAA,MAAQA,EACRG,KAAAA,SAAU,EACVF,KAAAA,MAAQA,EACRC,KAAAA,MAAQA,EAqCZ,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,SAlCME,MAAAA,SAAAA,GACJ,KAAKC,SAAW,KAAKL,OAAS,KAAKP,EAAI,GACtC,KAAKa,OAAS,KAAKL,OACnB,KAAKM,QAAU,KAAKL,OACjBT,KAAAA,GAAK,KAAKK,GACVN,KAAAA,GAAK,KAAKK,IAEXM,KAAAA,SAAU,IA2Bf,CAAA,IAAA,OAvBIK,MAAAA,SAAAA,GACFC,IAAAA,EAAK,KAAKV,OACXS,EAAIE,UACFD,EAAGlB,IACHkB,EAAGjB,EAAGiB,EAAGhB,EAAGgB,EAAGf,EAAGe,EAAGd,EACrB,KAAKH,EAAG,KAAKC,EAAGgB,EAAGf,EAAGe,EAAGd,KAkB5B,CAAA,IAAA,OAdK,MAAA,WACC,OAAA,KAAKH,IAaX,CAAA,IAAA,QAVM,MAAA,WACA,OAAA,KAAKA,EAAI,KAAKE,IASpB,CAAA,IAAA,MANI,MAAA,WACE,OAAA,KAAKD,IAKX,CAAA,IAAA,SAFO,MAAA,WACD,OAAA,KAAKA,EAAI,KAAKE,MACpB,EAjDkBC,GAiDlB,QAAA,QAAA;;AC0EA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EA3HH,IAAA,EAAA,EAAA,QAAA,aA2HG,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAzHkBe,IAAAA,EAAAA,WACPnB,SAAAA,EAAAA,EAAGC,EAAGmB,EAASC,EAAYZ,EAAOC,GAAO,EAAA,KAAA,GAChDV,KAAAA,EAAIA,EACJC,KAAAA,EAAIA,EACJqB,KAAAA,SAAWF,EACXG,KAAAA,YAAcF,EACdnB,KAAAA,EAAIkB,EAAQ,GAAGlB,EACfC,KAAAA,EAAIiB,EAAQ,GAAGjB,EACfM,KAAAA,MAAQA,EACRC,KAAAA,MAAQA,EACRc,KAAAA,GAAK,EAELC,KAAAA,KAAO,EA6GX,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,UA1GO,MAAA,WACD,OAAA,KAAKD,GAAK,IAyGhB,CAAA,IAAA,OAtGK,MAAA,WACA,OAAA,KAAKxB,IAqGV,CAAA,IAAA,QAlGM,MAAA,WACD,OAAA,KAAKA,EAAI,KAAKE,IAiGnB,CAAA,IAAA,MA9FI,MAAA,WACC,OAAA,KAAKD,IA6FV,CAAA,IAAA,SA1FO,MAAA,WACF,OAAA,KAAKA,EAAI,KAAKE,IAyFnB,CAAA,IAAA,SAtFO,MAAA,WACA,OAAA,KAAKH,EAAI,KAAKE,EAAE,IAqFvB,CAAA,IAAA,aAlFUwB,MAAAA,SAAAA,GAEV,OAAA,KAAKzB,EAAIyB,EAAIb,UACV,KAAKb,EAAI0B,EAAIX,SACVW,EAAI1B,EAAI,KAAKe,SACZW,EAAIzB,EAAI,KAAKY,WAEfW,KAAAA,IAAI,OACKG,IAAXD,EAAIF,GACNE,EAAIf,SAAU,EAEde,EAAIF,GAAiB,GAAZE,EAAIE,KAAY,EAAIF,EAAIF,IAC3B,KAsEP,CAAA,IAAA,WAjEOK,MAAAA,SAAAA,GACHJ,KAAAA,KAAOI,EAAQ,EAAIC,KAAKC,IAAI,KAAKN,KAAKI,EAAO,GAAKC,KAAKE,IAAI,KAAKP,KAAKI,EAAO,KAgEhF,CAAA,IAAA,QA7DII,MAAAA,SAAAA,GACCC,IAAAA,EAAM,KAAKpB,OAAS,EACpBqB,EAAM,KAAKpB,QAAS,EAAI,KAAKQ,YAAY,GAAGrB,EAC3C,OAAA,KAAKuB,MACN,KAAA,EACG,MAAA,CAAC,IAAIrB,EAAJ,QAAW,KAAKgC,SAAW,KAAKb,YAAY,GAAGrB,EAAI,EAAG,KAAKD,EAAG,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,QACvH,KAAA,EACG,MAAA,CACN,IAAIN,EAAJ,QAAW8B,EAAK,KAAKjC,EAAG,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,OAC7E,IAAIN,EAAJ,QAAW+B,EAAK,KAAKlC,EAAG,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,QAE1E,KAAA,EACG,MAAA,CACN,IAAIN,EAAJ,QAAW,KAAKgC,SAAW,KAAKb,YAAY,GAAGrB,EAAI,EAAG,KAAKD,EAAG,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,OACnH,IAAIN,EAAJ,QAAW8B,EAAK,KAAKjC,GAAI,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,OAC9E,IAAIN,EAAJ,QAAW+B,EAAK,KAAKlC,EAAG,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,QAE1E,KAAA,EACG,MAAA,CACN,IAAIN,EAAJ,QAAW,KAAKgC,SAAW,KAAKb,YAAY,GAAGrB,EAAI,EAAG,KAAKD,EAAG,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,OACnH,IAAIN,EAAJ,QAAW8B,EAAK,KAAKjC,GAAI,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,OAC9E,IAAIN,EAAJ,QAAW+B,EAAK,KAAKlC,EAAG,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,QAE1E,KAAA,EACG,MAAA,CACN,IAAIN,EAAJ,QAAW,KAAKgC,SAAW,KAAKb,YAAY,GAAGrB,EAAI,EAAG,KAAKD,EAAG,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,OACnH,IAAIN,EAAJ,QAAW8B,EAAK,KAAKjC,GAAI,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,OAC9E,IAAIN,EAAJ,QAAW+B,EAAK,KAAKlC,EAAG,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,OAC7E,IAAIN,EAAJ,QAAW8B,EAAK,KAAKjC,GAAI,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,OAC9E,IAAIN,EAAJ,QAAW+B,EAAK,KAAKlC,EAAG,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,QAE1E,KAAA,EACG,MAAA,CACN,IAAIN,EAAJ,QAAW,KAAKgC,SAAW,KAAKb,YAAY,GAAGrB,EAAI,EAAG,KAAKD,EAAG,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,OACnH,IAAIN,EAAJ,QAAW8B,EAAK,KAAKjC,GAAI,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,OAC9E,IAAIN,EAAJ,QAAW+B,EAAK,KAAKlC,EAAG,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,OAC7E,IAAIN,EAAJ,QAAW8B,EAAK,KAAKjC,GAAI,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,OAC9E,IAAIN,EAAJ,QAAW+B,EAAK,KAAKlC,EAAG,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,OAC7E,IAAIN,EAAJ,QAAW8B,EAAK,KAAKjC,GAAI,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,OAC9E,IAAIN,EAAJ,QAAW+B,EAAK,KAAKlC,EAAG,GAAI,EAAG,KAAKsB,YAAY,GAAIU,EAAQ,KAAKxB,MAAO,KAAKC,WAsB/E,CAAA,IAAA,OAfI2B,MAAAA,SAAAA,GACHA,EAAO,GAAK,KAAKrC,EAAIqC,GAAQ,KAAK5B,OAClC4B,EAAO,GAAK,KAAKtB,QAAUsB,GAAQ,KAAK3B,QACtCV,KAAAA,GAAKqC,KAYR,CAAA,IAAA,OATIrB,MAAAA,SAAAA,EAAKJ,GACL0B,IAAAA,EAAIR,KAAKS,KAAK3B,EAAO,KAAO,EAC9BK,EAAW,IAANqB,EAAU,KAAKhB,SAAS,GAAK,KAAKA,SAASgB,GAEjDtB,EAAIE,UACFD,EAAGlB,IACHkB,EAAGjB,EAAGiB,EAAGhB,EAAGgB,EAAGf,EAAGe,EAAGd,EACrB,KAAKH,EAAG,KAAKC,EAAGgB,EAAGf,EAAGe,EAAGd,OAE5B,EAzHkBgB,GAyHlB,QAAA,QAAA;;ACZA,aAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EA/GkBqB,IAAAA,EAAAA,WACPxC,SAAAA,EAAAA,EAAGC,EAAGI,EAAIC,EAAIkB,EAAII,EAAMR,EAASqB,EAAUhC,EAAOC,EAAOgC,GAAO,EAAA,KAAA,GACvE1C,KAAAA,EAAIA,EACJC,KAAAA,EAAIA,EACJ2B,KAAAA,KAAOA,EACPvB,KAAAA,GAAKA,EACLC,KAAAA,GAAKA,EACLgB,KAAAA,SAAWF,EACXlB,KAAAA,EAAI4B,KAAKC,IAAIY,MAAMb,KAAMV,EAAQwB,IAAI,SAAA5C,GAAGA,OAAAA,EAAEE,KAC1CC,KAAAA,EAAI2B,KAAKC,IAAIY,MAAMb,KAAMV,EAAQwB,IAAI,SAAA5C,GAAGA,OAAAA,EAAEG,KAC1CsC,KAAAA,SAAWA,EACXI,KAAAA,aAAe,EACfrB,KAAAA,GAAKA,EACLsB,KAAAA,MAAQtB,EACRf,KAAAA,MAAQA,EACRC,KAAAA,MAAQA,EACRgC,KAAAA,MAAQA,EA+FZ,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,UA5FO,MAAA,WACD,OAAA,KAAKlB,GAAK,IA2FhB,CAAA,IAAA,OAxFK,MAAA,WACC,OAAA,KAAKxB,IAuFX,CAAA,IAAA,MApFK,MAAA,WACC,OAAA,KAAKC,IAmFX,CAAA,IAAA,QAhFM,MAAA,WACA,OAAA,KAAKD,EAAI,KAAKE,IA+EpB,CAAA,IAAA,SA5EO,MAAA,WACD,OAAA,KAAKD,EAAI,KAAKE,IA2EpB,CAAA,IAAA,YAxESS,MAAAA,SAAAA,GACLkB,OAAAA,KAAKS,KAAK3B,EAAO,KAAO,KAAO,KAAK6B,UACrC7B,EAAO,KAAKiC,aAAe,MAC1BA,KAAAA,aAAejC,GACb,KAoEN,CAAA,IAAA,YA/DS,MAAA,WACP,OAAA,KAAKkC,MAAQ,KAAKtB,KACfsB,KAAAA,MAAQ,KAAKtB,IACX,KA4DP,CAAA,IAAA,aAvDUE,MAAAA,SAAAA,GAEV,OAAA,KAAKzB,EAAIyB,EAAIb,UACV,KAAKb,EAAI0B,EAAIX,SACJW,EAAI1B,EAAI,KAAKe,SACZW,EAAIzB,EAAI,KAAKY,WAErBW,KAAAA,IAAI,OACKG,IAAXD,EAAIF,GACNE,EAAIf,SAAU,EAEde,EAAIF,IAAI,GAEF,KA0CP,CAAA,IAAA,SArCO,MAAA,WACD,OAAA,KAAKxB,EAAI,KAAKE,EAAI,IAoCxB,CAAA,IAAA,OAjCK,MAAA,YACH,KAAKF,GAAK,KAAKS,OAAS,KAAKM,SAAW,KAAKL,SAC/C,KAAKL,IAAM,KAAKA,IACd,KAAKQ,UAAY,KAAK6B,OAAsB,GAAb,KAAKd,KACjCJ,KAAAA,GAAK,GAGNxB,KAAAA,GAAK,KAAKK,GACVJ,KAAAA,GAAK,KAAKK,MAyBd,CAAA,IAAA,OAtBIU,MAAAA,SAAAA,EAAKJ,GACL0B,IACFrB,EADEqB,EAAIR,KAAKS,KAAK3B,EAAO,KAAO,EAE1B,OAAA,KAAKgB,MACP,KAAA,EACM,KAAA,EACVX,EAAW,IAANqB,EAAU,KAAKhB,SAAS,GAAK,KAAKA,SAASgB,GAChD,MACI,KAAA,EACJrB,EAAK,KAAKK,SAASgB,EAAI,GACvB,MACI,KAAA,EACES,IAAAA,EAAQ,KAAK1C,GAAK,EAAI,EAAI,EAChCY,EAAW,IAANqB,EAAU,KAAKhB,SAASyB,EAAQ,GAAK,KAAKzB,SAASyB,EAAQT,GAI/DtB,EAAIE,UACFD,EAAGlB,IACHkB,EAAGjB,EAAGiB,EAAGhB,EAAGgB,EAAGf,EAAGe,EAAGd,EACrB,KAAKH,EAAG,KAAKC,EAAGgB,EAAGf,EAAGe,EAAGd,OAE5B,EA/GkBqC,GA+GlB,QAAA,QAAA;;AC3EA,aAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EApCkBQ,IAAAA,EAAAA,WACL,SAAA,IAAA,IAAA,EAAA,KAAA,EAAA,KAAA,GACPC,KAAAA,KAAO,GACRC,KAAAA,QAAU,GACfC,SAASC,iBAAiB,UAAW,SAAAC,GACpC,EAAKJ,KAAKI,EAAEC,UAAW,IAExBH,SAASC,iBAAiB,QAAS,SAAAC,UAC3B,EAAKJ,KAAKI,EAAEC,gBACZ,EAAKJ,QAAQG,EAAEC,WA2BvB,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,SAlBMC,MAAAA,SAAAA,GACC,OAAA,KAAKN,KAAKM,KAiBjB,CAAA,IAAA,YATSA,MAAAA,SAAAA,GAGL,OAAA,KAAKL,QAAQK,OAEN,KAAKN,KAAKM,KACb,KAAKL,QAAQK,IAAQ,QAG7B,EApCkBP,GAoClB,QAAA,QAAA;;ACyJD,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EA7LF,IAAA,EAAA,EAAA,QAAA,YACA,EAAA,EAAA,QAAA,aA4LE,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EA1LmBQ,IAAAA,EAAAA,WACRC,SAAAA,EAAAA,EACZC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAtD,EACAC,EACAgC,GAAM,EAAA,KAAA,GACAe,KAAAA,UAAYA,EACZC,KAAAA,WAAaA,EACbC,KAAAA,QAAUA,EACVC,KAAAA,gBAAkBA,EAClBC,KAAAA,gBAAkBA,EAClBC,KAAAA,aAAeA,EACfC,KAAAA,aAAeA,EACfC,KAAAA,KAAO,EACPvD,KAAAA,MAAQA,EACRC,KAAAA,MAAQA,EACRgC,KAAAA,MAAQA,EACRuB,KAAAA,OAAQ,EAERC,KAAAA,YAA2B,WAAbT,GAAuC,SAAbA,GAAqC,QAAbA,EAEhEU,KAAAA,UAAY,GACZC,KAAAA,OAAS,GAETC,KAAAA,IAAM,EACNC,KAAAA,SAAW,EAEXC,KAAAA,aAAe,EACfC,KAAAA,YAAa,EACbC,KAAAA,mBAAqB,EAwJ1B,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,UArJiB,MAAA,WAAVpC,IAAAA,EAAO,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAEP,OADF2B,KAAAA,MAAQ,KAAKA,KAAO3B,GAAQ,GAC1B,KAAK2B,OAmJZ,CAAA,IAAA,UAhJS,MAAA,WACLU,IAAAA,EAAO,KAAKjE,MAAQqB,KAAK6C,UAAa,KAAKjE,MAAQ,GAAM,KAAKD,OAC3DqB,OAAAA,KAAK8C,MAAMF,KA8IlB,CAAA,IAAA,mBA3IiB,MAAA,WACbG,IAAAA,EAAW,EACR,OAAA,KAAKpB,WACN,IAAA,QACJoB,EAAW,EACP,IAAA,YACA,IAAA,IAAIC,EAAI,EAAGA,EAAI,KAAKhB,aAAaiB,SAAUD,EAC1C,IAAA,IAAIE,EAAI,EAAGA,EAAI,KAAKtB,aAAcsB,EAG/BC,IAFHA,IAAAA,EAAS,KAAKxE,MAAQ,GACtByE,EAAS,GAA2B,IAArBJ,EAAE,KAAKpB,WAAWsB,GAC9BC,EAAS,GAAK,KAAKvE,OACpB0D,KAAAA,OAAOe,KAAK,IAAI3C,EAAJ,QAAUyC,EAAQC,EAAQ,KAAKtB,gBAAiB,KAAKC,gBACtE,KAAKF,QAASkB,EAAU,KAAKf,aAAagB,GAAI,KAAKM,UAAW,KAAK3E,MAAO,KAAKC,MAAO,KAAKgC,QAC3FuC,GAAQ,GAIX,MAEK,IAAA,UACA,IAAA,IAAIH,EAAI,EAAGA,EAAI,KAAKhB,aAAaiB,SAAUD,EAC1C,IAAA,IAAIE,EAAI,EAAGA,EAAI,KAAKtB,aAAcsB,EAAE,CACpCC,IAAAA,EAAS,KAAKI,UAEblB,KAAAA,UAAUgB,KAAK,IAAI3C,EAAJ,QAAUyC,EADjB,EACiC,KAAKrB,gBAAiB,KAAKC,gBACxE,KAAKF,QAAS,EAAG,KAAKG,aAAagB,GAAI,KAAKM,UAAW,KAAK3E,MAAO,KAAKC,MAAO,KAAKgC,QAGnF4C,IAAAA,EAAM,KAAKD,UAAY,GACtBjB,KAAAA,OAAS,KAAKD,UAAUoB,MAAM,KAAKlB,IAAK,KAAKA,IAAMiB,GACnDjB,KAAAA,KAAOiB,EACZ,MAEQ,IAAA,OACJE,IAAAA,GAAgB,KAAK/E,MAAQ,KAAKC,OAAO,EACxC6D,KAAAA,aAAe,KAAK7B,MAAM,EACvB0B,KAAAA,OAAOe,KAAK,IAAI3C,EAAJ,QAAUgD,EAAc,KAAKjB,aAAc,KAAKX,gBAAiB,EACpF,KAAKD,QAAS,EAAG,KAAKG,aAAa,GAAI,KAAKsB,QAAQ,IAAK,KAAK3E,MAAO,KAAKC,MAAO,KAAKgC,WAsGxF,CAAA,IAAA,QA9FK9B,MAAAA,SAAAA,GAAK,IAAA,EAAA,KACN6E,EAAS,GAEN,OAAA,KAAKhC,WACN,IAAA,YAC2B,KAAKW,OAAOsB,OAAO,SAAA1F,GAAGA,OAAAA,EAAE2F,UAAU/E,KACpDgF,QAAQ,SAAA5F,GACX6F,IAAAA,EAAO7F,EAAEoC,SACT0D,EAAO9F,EAAEa,SACf4E,EAAON,KAAK,IAAI/E,EAAJ,QAAWyF,EAAO,EAAK9B,aAAa7D,EAAI,EAAG4F,EAAM,EAAG,EAAG,EAAK/B,aAAc,EAAKrB,MAAO,EAAKjC,MAAO,EAAKC,UAExH,MAEK,IAAA,UACL,MAEK,IAAA,QACe,KAAK0D,OAAOsB,OAAO,SAAA1F,GAAGA,OAAAA,EAAE+F,cAC9BH,QAAQ,SAAA5F,GACd6F,IAAAA,EAAO7F,EAAEoC,SACT0D,EAAO9F,EAAEa,SACf4E,EAAON,KAAK,IAAI/E,EAAJ,QAAWyF,EAAO,EAAK9B,aAAa7D,EAAI,EAAG4F,EAAM,EAAG,EAAG,EAAK/B,aAAc,EAAKrB,MAAO,EAAKjC,MAAO,EAAKC,UAErH,MAEQ,IAAA,OACJ,GAAsB,GAAtB,KAAK0D,OAAOW,OAAa,MACrBiB,IAAAA,EAAO,KAAK5B,OAAO,GAChB6B,EAAQD,EAAKlF,OACboF,EAAQF,EAAKjF,QAAU,KAAKgD,aAAa7D,EAC7C4F,EAAOE,EAAKnF,UACXmF,EAAKL,UAAU/E,IAASoF,EAAKD,eACnCN,EAAON,KAAK,IAAI/E,EAAJ,QAAW6F,EAAOH,EAAM,EAAG,EAAG,KAAK/B,aAAc,KAAKrB,MAAO,KAAKjC,MAAO,KAAKC,QACtF+E,EAAON,KAAK,IAAI/E,EAAJ,QAAW8F,EAAOJ,EAAM,EAAG,EAAG,KAAK/B,aAAc,KAAKrB,MAAO,KAAKjC,MAAO,KAAKC,SAI1F+E,OAAAA,IAyDP,CAAA,IAAA,WAtDS,MAAA,WACJrB,KAAAA,OAAS,KAAKA,OAAOsB,OAAO,SAAA1F,GAAGA,OAAAA,EAAEW,YACjB,WAAlB,KAAK8C,UACFQ,KAAAA,MAA8B,GAAtB,KAAKG,OAAOW,QAAe,KAAKV,KAAO,KAAKF,UAAUY,OAGnE,KAAKd,MAA8B,GAAtB,KAAKG,OAAOW,SAgD1B,CAAA,IAAA,YA7CU,MAAA,WACP,KAAKtB,UACHW,KAAAA,OAAOwB,QAAQ,SAAA5F,GAAKA,OAAAA,EAAEmG,WA2C3B,CAAA,IAAA,SAxCMvF,MAAAA,SAAAA,EAAMwF,EAAUC,GACf,OAAA,KAAK5C,WACN,IAAA,YACL,MACK,IAAA,UACD,GAAA,KAAKY,IAAM,KAAKF,UAAUY,QAAUnE,EAAO,KAAK0D,SAAW,IAAK,CAC9DgB,IAAAA,EAAM,KAAKD,UAAY,EAAI,EAC3BiB,EAAUxE,KAAKE,IAAI,KAAKmC,UAAUY,OAAQO,EAAM,KAAKjB,KACpDD,KAAAA,OAAS,KAAKA,OAAOmC,OAAO,KAAKpC,UAAUoB,MAAM,KAAKlB,IAAKiC,IAC3DjC,KAAAA,KAAOiB,EACPhB,KAAAA,SAAW1D,EAGlB,MACQ,IAAA,OACHoF,IAAAA,EAAO,KAAK5B,OAAO,GACpBgC,GAAYJ,EAAK5D,UAAY4D,EAAK5D,SAAWiE,GAAaL,EAAK/F,GAAK,KAAKsE,cACtEE,KAAAA,mBAAqBuB,EAAK3F,GAC1B+D,KAAAA,OAAO,GAAG/D,GAAK,EACf+D,KAAAA,OAAO,GAAG9D,GAAK,KAAKuD,gBACpBW,KAAAA,YAAa,GACTwB,EAAKnF,UAAY,KAAK6B,OAC1B0B,KAAAA,OAAO,GAAG/D,GAAK,EACf+D,KAAAA,OAAO,GAAG9D,IAAM,KAAKuD,iBACjBmC,EAAKQ,MAAQ,KAAKjC,cAAgB,KAAKC,aAC3CJ,KAAAA,OAAO,GAAGnE,EAAI,KAAKsE,aACnBH,KAAAA,OAAO,GAAG/D,GAAK,KAAKoE,mBACpBL,KAAAA,OAAO,GAAG9D,GAAK,EACfkE,KAAAA,YAAa,GAOhBiC,KAAAA,cAKL,CAAA,IAAA,YAFSC,MAAAA,SAAAA,EAAS9F,GACbwD,KAAAA,OAAOwB,QAAQ,SAAAe,GAAKA,OAAAA,EAAEC,KAAKF,EAAS9F,SACzC,EA1LmB4C,GA0LnB,QAAA,QAAA;;ACxIC,aAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EArDkBqD,IAAAA,EAAAA,WACR7G,SAAAA,EAAAA,EAAGC,EAAGK,EAAIC,GAAO,EAAA,KAAA,GACvBP,KAAAA,EAAIA,EACJC,KAAAA,EAAIA,EACJC,KAAAA,EAAIK,EAAOL,EACXC,KAAAA,EAAII,EAAOJ,EACXG,KAAAA,GAAKA,EACLC,KAAAA,OAASA,EACTI,KAAAA,SAAU,EA6Cd,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,OA1CK,MAAA,WACC,OAAA,KAAKX,IAyCX,CAAA,IAAA,QAtCM,MAAA,WACA,OAAA,KAAKA,EAAI,KAAKE,IAqCpB,CAAA,IAAA,MAlCI,MAAA,WACE,OAAA,KAAKD,IAiCX,CAAA,IAAA,SA9BO,MAAA,WACD,OAAA,KAAKA,EAAI,KAAKE,IA6BpB,CAAA,IAAA,OA1BGK,MAAAA,SAAAA,GACD,KAAKK,UAAYL,EACnB,KAAKG,SAAU,EAEf,KAAKV,GAAK,KAAKK,KAsBf,CAAA,IAAA,OAnBGU,MAAAA,SAAAA,GACFA,EAAIE,UACF,KAAKX,OAAOR,IACZ,KAAKQ,OAAOP,EAAG,KAAKO,OAAON,EAAG,KAAKC,EAAG,KAAKC,EAC3C,KAAKH,EAAG,KAAKC,EAAG,KAAKC,EAAG,KAAKC,KAehC,CAAA,IAAA,aAXSuB,MAAAA,SAAAA,GAET,OAAA,KAAKzB,EAAIyB,EAAIb,UACV,KAAKb,EAAI0B,EAAIX,SACVW,EAAI1B,EAAI,KAAKe,SACZW,EAAIzB,EAAI,KAAKY,WAEfF,KAAAA,SAAU,GACR,OAGP,EArDkBkG,GAqDlB,QAAA,QAAA;;;;;;ACrDH,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,YAAA,EAAA,IAAMC,EAAS,CACdC,OAAQ,CAER,CACCtD,UAAW,YACXuD,WAAY,CAAC,GACbtD,WAAY,EACZE,gBAAiB,EACjBC,gBAAiB,EACjBF,QAAS,EACTsD,WAAY,GAGb,CACCxD,UAAW,YACXuD,WAAY,CAAC,EAAG,GAChBtD,WAAY,EACZE,gBAAiB,EACjBC,gBAAiB,EACjBF,QAAS,EACTsD,WAAY,GAGb,CACCxD,UAAW,UACXuD,WAAY,CAAC,GACbtD,WAAY,GACZE,gBAAiB,EACjBC,gBAAiB,EACjBF,QAAS,EACTsD,WAAY,GAGb,CACCxD,UAAW,QACXuD,WAAY,CAAC,GACbtD,WAAY,EACZE,gBAAiB,EACjBC,gBAAiB,GACjBF,QAAS,EACTsD,WAAY,GAGb,CACCxD,UAAW,YACXuD,WAAY,CAAC,EAAG,EAAG,GACnBtD,WAAY,EACZE,gBAAiB,EACjBC,gBAAiB,EACjBF,QAAS,EACTsD,WAAY,GAGb,CACCxD,UAAW,UACXuD,WAAY,CAAC,EAAG,GAChBtD,WAAY,GACZE,gBAAiB,EACjBC,gBAAiB,EACjBF,QAAS,EACTsD,WAAY,GAGb,CACCxD,UAAW,QACXuD,WAAY,CAAC,EAAG,GAChBtD,WAAY,EACZE,gBAAiB,IACjBC,gBAAiB,GACjBF,QAAS,EACTsD,WAAY,GAGb,CACCxD,UAAW,YACXuD,WAAY,CAAC,EAAG,EAAG,GACnBtD,WAAY,EACZE,gBAAiB,EACjBC,gBAAiB,EACjBF,QAAS,EACTsD,WAAY,GAGb,CACCxD,UAAW,UACXuD,WAAY,CAAC,EAAG,EAAG,GACnBtD,WAAY,GACZE,gBAAiB,EACjBC,gBAAiB,GACjBF,QAAS,EACTsD,WAAY,GAGb,CACCxD,UAAW,OACXuD,WAAY,CAAC,GACbtD,WAAY,EACZE,gBAAiB,EACjBC,gBAAiB,GACjBF,QAAS,GACTsD,WAAY,KApGd,QAAA,OAAA;;AC4TC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,EAAA,QAAA,SAAA,EAAA,QAAA,OAAA,EAAA,QAAA,KAAA,EA5TD,IAaIC,EACAC,EAdJ,EAAA,EAAA,QAAA,aACA,EAAA,EAAA,QAAA,WACA,EAAA,EAAA,QAAA,aACA,EAAA,EAAA,QAAA,YACA,EAAA,EAAA,QAAA,oBACA,EAAA,EAAA,QAAA,YACA,EAAA,EAAA,QAAA,WAEA,EAAA,EAAA,QAAA,uBACA,EAAA,EAAA,QAAA,yBAEA,EAAA,QAAA,UAiTC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GA5SD,IAAM/F,EAAU,CACdgD,OAAQ,GACRgD,KAAM,GACNC,YAAa,GACbC,cAAe,GAChBC,KAAM,MAEDC,EAAY,CAChBC,SAAU,KACVC,WAAY,IACZC,QAAS,GACTC,aAAc,GACdxD,OAAQ,GACRgD,KAAM,KACNL,OAAQ,GACRc,WAAW,EACXC,YAAa,EACbC,WAAW,EACXC,UAAU,EACXC,WAAU,EACVC,MAAO,EACPC,eAAgB,EAChBC,MAAO,GACPC,aAAc,GAGf,SAASC,EAAajF,GAClBA,GAAc,KAAdA,EAAEC,QAAe,CAChBkE,GAAAA,EAAUO,UAGZ,OAFAP,EAAUO,WAAY,OACtBQ,IAGEf,GAAAA,EAAUK,UAIX,OAHAL,EAAUM,aAAa,EACvBN,EAAUK,WAAY,OACtBU,KAGCf,EAAUS,WAAaT,EAAUQ,WACnCQ,OAAOC,SAASC,UAKnB,IAAI1E,EAAO,EACL2E,EAAe,IAAI3F,EAAJ,QAEd,SAAS4F,EAAQC,IACvB1B,EAAe,IAAI2B,OACN1F,iBAAiB,OAAQ,WAEtChC,EAAQkG,cAAgB,CACvB,IAAIxH,EAAJ,QAAWqH,EAAe,IAAK,GAAI,EAAG,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,IAAK,GAAI,GAAI,KAGnF/F,EAAQgD,OAAS,CAChB,CAAC,IAAItE,EAAJ,QAAWqH,EAAe,EAAG,EAAG,GAAI,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,GAAI,EAAG,GAAI,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,GAAI,EAAG,GAAI,KACxH,CAAA,IAAIrH,EAAJ,QAAWqH,EAAe,EAAG,GAAI,GAAI,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,GAAI,GAAI,GAAI,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,GAAI,GAAI,GAAI,KAC3H,CAAA,IAAIrH,EAAJ,QAAWqH,EAAe,IAAK,IAAK,GAAI,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,IAAK,IAAK,GAAI,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,IAAK,IAAK,GAAI,KAClI,CAAA,IAAIrH,EAAJ,QAAWqH,EAAe,IAAK,GAAI,GAAI,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,IAAK,GAAI,GAAI,KACnF,CAAA,IAAIrH,EAAJ,QAAWqH,EAAe,IAAK,GAAI,GAAI,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,IAAK,GAAI,GAAI,KACnF,CAAA,IAAIrH,EAAJ,QAAWqH,EAAe,IAAK,GAAI,GAAI,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,IAAK,GAAI,GAAI,KAEnF,CAAA,IAAIrH,EAAJ,QAAWqH,EAAe,GAAI,IAAK,GAAI,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,GAAI,IAAK,GAAI,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,GAAI,IAAK,GAAI,IAC3HrH,IAAAA,EAAJ,QAAWqH,EAAe,EAAG,IAAK,GAAI,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,GAAI,IAAK,GAAI,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,EAAG,IAAK,GAAI,KAE9H,CACC,IAAIrH,EAAJ,QAAWqH,EAAe,IAAK,IAAK,GAAI,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,GAAI,IAAK,GAAI,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,IAAK,IAAK,GAAI,IAC7HrH,IAAAA,EAAJ,QAAWqH,EAAe,GAAI,IAAK,GAAI,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,GAAI,IAAK,GAAI,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,IAAK,IAAK,GAAI,KAEjI,CAAC,IAAIrH,EAAJ,QAAWqH,EAAe,IAAK,GAAI,GAAI,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,IAAK,IAAK,GAAI,IAAK,IAAIrH,EAAJ,QAAWqH,EAAe,IAAK,EAAG,GAAI,QAIjIA,EAAa4B,IAAMC,EAAnB,SAEA9B,EAAY,IAAI4B,OACN1F,iBAAiB,OAAQ,WAChChC,EAAQgG,KAAO,CAAC,IAAItH,EAAJ,QAAWoH,EAAW,EAAG,EAAG,GAAI,IAAK,IAAIpH,EAAJ,QAAWoH,EAAW,GAAI,EAAG,GAAI,IAAK,IAAIpH,EAAJ,QAAWoH,EAAW,IAAK,EAAG,GAAI,KAC7H9F,EAAQiG,YAAc,CACxB,IAAIvH,EAAJ,QAAWoH,EAAW,IAAK,EAAG,EAAG,IAAK,IAAIpH,EAAJ,QAAWoH,EAAW,IAAK,GAAI,GAAI,IACzE,IAAIpH,EAAJ,QAAWoH,EAAW,IAAK,GAAI,GAAI,IAAK,IAAIpH,EAAJ,QAAWoH,EAAW,IAAK,GAAI,GAAI,KAE3E9F,EAAQmG,KAAO,IAAIzH,EAAJ,QAAWoH,EAAW,IAAK,GAAI,GAAI,IACnD2B,MAEA3B,EAAU6B,IAAME,EAAhB,QAGM,SAASC,EAASzB,EAAU0B,GAClC3B,EAAUE,aAAeyB,EAAOC,MAAQ,KAAO,EAAI,KAAK,EAGjDrC,EAAAA,OAAAA,OAAOnB,QAAQ,SAAAyD,GACjBC,IAAAA,EAAO,GACXD,EAAMrC,WAAWpB,QAAQ,SAAA5F,GAAGsJ,OAAAA,EAAKnE,KAAK/D,EAAQgD,OAAOpE,MACrDwH,EAAUT,OAAO5B,KACjB,IAAI3B,EAAJ,QAAU6F,EAAM5F,UAAW4F,EAAM3F,WAAY2F,EAAM1F,QAClD0F,EAAMzF,gBAAiByF,EAAMxF,gBAAiByF,EAAMlI,EAAQkG,cAAc+B,EAAMpC,YAChFkC,EAAOC,MAAM,EAAI5B,EAAUE,WAAYyB,EAAOC,MAAM,EAAI5B,EAAUE,WAAYyB,EAAOlH,WAIvFuF,EAAUJ,KAAO,IAAIjG,EAAJ,QAChBgI,EAAOC,MAAM,EAAI5B,EAAUE,WAAa,GAAIyB,EAAOlH,OAAS,IAC5Db,EAAQgG,KAAMhG,EAAQiG,YAAa8B,EAAOC,MAAM,EAAI5B,EAAUE,WAAYyB,EAAOC,MAAM,EAAI5B,EAAUE,YAGtGF,EAAUC,SAAWA,EAErBe,OAAOpF,iBAAiB,UAAWkF,GAAc,GAGlD,SAASC,IACRf,EAAUT,OAAOS,EAAUM,aAAayB,mBACxC/B,EAAUJ,KAAK5F,IAAM,EACrBgG,EAAUG,QAAU,GACpBH,EAAUI,aAAe,GACzBJ,EAAUY,MAAQ,GAClBZ,EAAUC,WAGX,SAASpC,EAAQ5E,EAAOC,GAClBgE,IAAAA,EAAOjE,EAAQqB,KAAK6C,UAAajE,EAAQ,GAAMD,GAC5CqB,OAAAA,KAAK8C,MAAMF,GAGb,SAAS8E,EAAO5I,EAAM6I,EAAUN,GAClCR,EAAae,OAAO,KACvBlC,EAAUJ,KAAKjB,MAAM,GAGlBwC,EAAae,OAAO,KACvBlC,EAAUJ,KAAKjB,KAAK,GAGjBwC,EAAagB,UAAU,MAC1BnC,EAAUG,QAAUH,EAAUG,QAAQpB,OAAOiB,EAAUJ,KAAKwC,MAAMT,EAAOlH,UAGtEuF,EAAUW,gBAAkBrG,KAAK8C,MAAM4C,EAAUU,MAAQ,MAC5DV,EAAUY,MAAMjD,KAAK,IAAI0B,EAAJ,QACrBxB,EAAQ8D,EAAOC,MAAM,EAAI5B,EAAUE,WAAYyB,EAAOC,MAAM,EAAI5B,EAAUE,YAC1E,GAAI,EAAGtG,EAAQmG,OACfC,EAAUW,eAAiBrG,KAAK8C,MAAM4C,EAAUU,MAAQ,KAGzDV,EAAUY,MAAMxC,QAAQ,SAAAiE,GACpBA,EAAEC,WAAWtC,EAAUJ,QACzBI,EAAUa,cAAc,EACrBb,EAAUa,aAAe,GAAK,GAChCb,EAAUJ,KAAK2C,SAAS,GACtBvC,EAAUa,aAAe,GAAK,IAChCb,EAAUJ,KAAK5F,IAAI,IAErBqI,EAAE1D,KAAKgD,EAAOlH,UAGXoH,IAAAA,EAAQ7B,EAAUT,OAAOS,EAAUM,aAEvCN,EAAUI,aAAeJ,EAAUI,aAAarB,OAAO8C,EAAMO,MAAMhJ,IAElE4G,EAAUG,QAAQ/B,QAAQ,SAAAoE,GAC1BA,EAAER,OAAO5I,GACTyI,EAAMjF,OAAOwB,QAAQ,SAAA5F,GACjBA,EAAE8J,WAAWE,KACfxC,EAAUU,OAAS,OAIrBmB,EAAMY,WAEJZ,EAAMnF,aACRmF,EAAMjF,OAAOwB,QAAQ,SAAA5F,GACjBwH,EAAUJ,KAAK0C,WAAW9J,IAC5BwH,EAAUJ,KAAK2C,UAAU,KAI3BvC,EAAUI,aAAahC,QAAQ,SAAAoE,GAC/BA,EAAER,OAAO5I,GACN4G,EAAUJ,KAAK0C,WAAWE,IAC5BxC,EAAUJ,KAAK2C,UAAU,KAIrBvC,EAAUJ,KAAKzG,YACpB6G,EAAUQ,UAAW,EACrByB,KAGKJ,EAAMpF,QACNuD,EAAUM,YAAY,GAAKN,EAAUT,OAAOhC,OAC/CyC,EAAUS,WAAY,GAEvBT,EAAUK,WAAY,EACtB4B,MAIFJ,EAAMG,OAAO5I,EAAM4G,EAAUJ,KAAKtG,OAAQ0G,EAAUJ,KAAKrG,SAExDyG,EAAUI,aAAeJ,EAAUI,aAAalC,OAAO,SAAAsE,GAAKA,OAAAA,EAAErJ,UAC9D6G,EAAUG,QAAUH,EAAUG,QAAQjC,OAAO,SAAAsE,GAAKA,OAAAA,EAAErJ,UACrD6G,EAAUY,MAAQZ,EAAUY,MAAM1C,OAAO,SAAAmE,GAAKA,OAAAA,EAAElJ,UAGjD,SAASuJ,EAAgBf,GAClBzC,IAAAA,EAAUyC,EAAOgB,WAAW,MAClCzD,EAAQ0D,KAAO,aACf1D,EAAQ2D,UAAY,UACpB3D,EAAQ4D,SAAS,UAAY9C,EAAUM,YAAY,GAAIqB,EAAOC,MAAM,EAAI,IAAKD,EAAOlH,OAAO,EAAE,KAC7FyE,EAAQ0D,KAAO,aACf1D,EAAQ4D,SAAS,wBAAyBnB,EAAOC,MAAM,EAAI,IAAKD,EAAOlH,OAAO,GAG/E,SAASsI,EAAQpB,GACVzC,IAAAA,EAAUyC,EAAOgB,WAAW,MAClCzD,EAAQ0D,KAAO,aACf1D,EAAQ2D,UAAY,UACpB3D,EAAQ4D,SAAS,kBAAmBnB,EAAOC,MAAM,EAAI,IAAKD,EAAOlH,OAAO,EAAE,KAC1EyE,EAAQ4D,SAAS,UAAWnB,EAAOC,MAAM,EAAI,IAAKD,EAAOlH,OAAO,EAAI,IACpEyE,EAAQ0D,KAAO,aACf1D,EAAQ4D,SAAS,eAAiB9C,EAAUU,MAAOiB,EAAOC,MAAM,EAAI,IAAKD,EAAOlH,OAAO,EAAI,IAC3FyE,EAAQ4D,SAAS,yBAA0BnB,EAAOC,MAAM,EAAI,IAAKD,EAAOlH,OAAO,EAAI,IAGpF,SAASuI,EAAarB,GACfzC,IAAAA,EAAUyC,EAAOgB,WAAW,MAClCzD,EAAQ0D,KAAO,aACf1D,EAAQ2D,UAAY,UACpB3D,EAAQ4D,SAAS,WAAYnB,EAAOC,MAAM,EAAI,IAAKD,EAAOlH,OAAO,EAAI,KACrEyE,EAAQ0D,KAAO,aACf1D,EAAQ4D,SAAS,eAAiB9C,EAAUU,MAAOiB,EAAOC,MAAM,EAAI,IAAKD,EAAOlH,OAAO,EAAI,IAC3FyE,EAAQ4D,SAAS,WAAa9C,EAAUM,YAAY,GAAIqB,EAAOC,MAAM,EAAI,GAAID,EAAOlH,OAAO,EAAI,IAC/FyE,EAAQ4D,SAAS,yBAA0BnB,EAAOC,MAAM,EAAI,IAAKD,EAAOlH,OAAO,EAAI,IAG7E,SAAS2E,EAAKuC,EAAQvI,GACrB8F,IAAAA,EAAUyC,EAAOgB,WAAW,MAGhC3C,GAFFd,EAAQ+D,UAAU,EAAG,EAAGtB,EAAOC,MAAOD,EAAOlH,QAE3CuF,EAAUK,UACZqC,EAAgBf,QAId3B,GAAAA,EAAUS,UACZsC,EAAQpB,QAIN3B,GAAAA,EAAUQ,SACZwC,EAAarB,OADX3B,CAKC/G,IAAAA,EAAQ0I,EAAOC,MAAM,EAAI5B,EAAUE,WACnChH,EAAQyI,EAAOC,MAAM,EAAI5B,EAAUE,WAGvChB,EAAQgE,YACRhE,EAAQiE,YAAc,UACtBjE,EAAQkE,OAAOnK,EAAO,GACtBiG,EAAQmE,OAAOpK,EAAO0I,EAAOlH,QAC7ByE,EAAQkE,OAAOlK,EAAO,GACtBgG,EAAQmE,OAAOnK,EAAOyI,EAAOlH,QAC7ByE,EAAQoE,YACRpE,EAAQqE,SAGRrE,EAAQ0D,KAAO,aACf1D,EAAQ2D,UAAY,UACpB3D,EAAQ4D,SAAS,UAAY9C,EAAUM,YAAc,GAAIrH,EAAM,EAAI,GAAI,KACvEiG,EAAQ0D,KAAO,aACf1D,EAAQ4D,SAAS,SAAW9C,EAAUU,MAAOzH,EAAM,EAAI,GAAI,KAE3DiG,EAAQxF,UACHE,EAAQmG,KAAKxH,IACbqB,EAAQmG,KAAKvH,EAAGoB,EAAQmG,KAAKtH,EAAGmB,EAAQmG,KAAKrH,EAAGkB,EAAQmG,KAAKpH,GAC5DO,EAAQyI,EAAOC,OAAO,EAAIhI,EAAQmG,KAAKrH,EAAI,GAAIiJ,EAAOlH,OAAS,EAAEb,EAAQgG,KAAK,GAAGjH,EAAGiB,EAAQmG,KAAKrH,EAAGkB,EAAQmG,KAAKpH,GAGvHuG,EAAQ4D,SAAS9C,EAAUa,cAAe3H,EAAQyI,EAAOC,OAAO,EAAIhI,EAAQmG,KAAKrH,EAAI,GAAIiJ,EAAOlH,OAAS,KAAOb,EAAQgG,KAAK,GAAGjH,GAEhIuG,EAAQxF,UACLE,EAAQgG,KAAK,GAAGrH,IAChBqB,EAAQgG,KAAK,GAAGpH,EAAGoB,EAAQgG,KAAK,GAAGnH,EAAGmB,EAAQgG,KAAK,GAAGlH,EAAGkB,EAAQgG,KAAK,GAAGjH,GACxEO,EAAQyI,EAAOC,OAAO,EAAIhI,EAAQgG,KAAK,GAAGlH,EAAI,EAAGiJ,EAAOlH,OAAS,EAAEb,EAAQgG,KAAK,GAAGjH,EAAGiB,EAAQgG,KAAK,GAAGlH,EAAGkB,EAAQgG,KAAK,GAAGjH,GAG7HuG,EAAQ4D,SAAS9C,EAAUJ,KAAK5F,IAAKd,EAAQyI,EAAOC,OAAO,EAAIhI,EAAQmG,KAAKrH,EAAI,GAAIiJ,EAAOlH,OAAS,IAAMb,EAAQgG,KAAK,GAAGjH,GAGzHqH,EAAUT,OAAOS,EAAUM,aAAakD,UAAUtE,EAAS9F,GAC5D4G,EAAUY,MAAMxC,QAAQ,SAAAiE,GAAKA,OAAAA,EAAEjD,KAAKF,KACnCc,EAAUJ,KAAKR,KAAKF,EAAS9F,GAC7B4G,EAAUG,QAAQ/B,QAAQ,SAAAoE,GAAKA,OAAAA,EAAEpD,KAAKF,KACtCc,EAAUI,aAAahC,QAAQ,SAAAoE,GAAKA,OAAAA,EAAEpD,KAAKF;;AC9P7C,aA7DA,IAAA,EAAA,QAAA,UAOMyC,EAAShG,SAAS8H,eAAe,QACvC9B,EAAOC,MAAQZ,OAAO0C,WACtB/B,EAAOlH,OAASuG,OAAO2C,YAEvB,IACI7G,EACA8G,EACAC,EAHEC,EAAa,GAKnB,SAASC,EAAIC,GACTH,EAAY7C,OAAOiD,sBAAsBF,GAEnCG,IACFC,EAAW,EAEXH,GAAAA,EAHalH,EAAWgH,EAGL,CACbM,IAAAA,EAAgBJ,EAASlH,EAC/BqH,EAAW7J,KAAK8C,MAAMgH,EAAgBN,GAGrC,IAAA,IAAItG,EAAI,EAAGA,EAAI2G,EAAU3G,IAC1BV,GAAsBgH,GACfhH,EAAAA,EAAAA,QAAAA,EAAUmF,EAAUN,IAG1BA,EAAAA,EAAAA,MAAAA,EAAQqC,GACbJ,EAAaI,EAGjB,SAAS/B,IACNjB,OAAOqD,qBAAqBR,GAG/B,SAASS,IACPxH,EAAWyH,YAAYC,MACvBZ,EAAa9G,EACb+G,EAAY,KACZE,IAGF,SAASU,EAAcvF,GACtBA,EAAQ0D,KAAO,aACf1D,EAAQ2D,UAAY,UACpB3D,EAAQ4D,SAAS,iBAAkBnB,EAAOC,MAAM,EAAI,IAAKD,EAAOlH,OAAO,EAAE,KACzEyE,EAAQ0D,KAAO,aACf1D,EAAQ4D,SAAS,oBAAqBnB,EAAOC,MAAM,EAAI,IAAKD,EAAOlH,OAAO,EAAI,KAC9EyE,EAAQ4D,SAAS,wBAAyBnB,EAAOC,MAAM,EAAI,IAAKD,EAAOlH,OAAO,GAG/E,SAAS4G,IACRoD,EAAc9C,EAAOgB,WAAW,QACvB2B,EAAAA,EAAAA,UAAAA,EAAmB3C,IAG7B,EAAQN,EAAAA,SAAAA","file":"src.ad38833c.js","sourceRoot":"..","sourcesContent":["export default class Sprite {\n  constructor(img, x, y, w, h) {\n    this.img = img;\n  \tthis.x = x;\n  \tthis.y = y;\n  \tthis.w = w;\n  \tthis.h = h;\n  }\n}\n","export default class Bullet {\n  constructor(x, y, vx, vy, sprite, cnvsB, cnvsL, cnvsR) {\n    this.x = x;\n  \tthis.y = y;\n\t\tthis.vx = vx;\n  \tthis.vy = vy;\n  \tthis.w = sprite.w;\n  \tthis.h = sprite.h;\n  \tthis.sprite = sprite;\n\t\tthis.cnvsB = cnvsB;\n\t\tthis.isAlive = true;\n\t\tthis.cnvsL = cnvsL;\n\t\tthis.cnvsR = cnvsR;\n  }\n\n  update(time) {\n\t\tif(this.bottom() < this.cnvsB && this.y > 0 \n\t\t\t&& this.left() > this.cnvsL \n\t\t\t&& this.right() < this.cnvsR) {\n\t\t\t\tthis.y += this.vy;\n\t\t\t\tthis.x += this.vx;\n\t\t} else {\n\t\t\tthis.isAlive = false;\n\t\t}\n  }\n\n  draw(ctx) {\n\tlet sp = this.sprite;\n    ctx.drawImage(\n      sp.img,\n      sp.x, sp.y, sp.w, sp.h,\n      this.x, this.y, sp.w, sp.h\n    );\n  }\n  \n  left(){\n\t\treturn this.x;  \n  }\n  \n  right(){\n\t\treturn this.x + this.w;  \n  }\n  \n  top(){\n\t\treturn this.y;\n  }\n  \n  bottom(){\n\t\treturn this.y + this.h;  \n  }\n}","import Bullet from './bullet'\n\nexport default class Ship {\n  constructor(x, y, sprites, bulSprites, cnvsL, cnvsR) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis._sprites = sprites;\n\t\tthis._bulSprites = bulSprites;\n\t\tthis.w = sprites[0].w;\n\t\tthis.h = sprites[0].h;\n\t\tthis.cnvsL = cnvsL;\n\t\tthis.cnvsR = cnvsR;\n\t\tthis.hp = 2;\n\t\t\n\t\tthis.mode = 0;\n  }\n  \n\tisAlive(){\n\t\treturn this.hp > 0;\n\t}\n\t\n  left(){\n\treturn this.x;  \n  }\n  \n  right(){\n\treturn this.x + this.w;  \n  }\n  \n  top(){\n\treturn this.y;\n  }\n  \n  bottom(){\n\treturn this.y + this.h;  \n  }\n  \n  center(){\n\t  return this.x + this.w/2;\n  }\n  \n  intersects(fig) {\n\t\tif(\n\t\t\tthis.y < fig.bottom()\n\t\t\t&& this.x < fig.right()\n      && fig.x < this.right()\n      && (fig.y < this.bottom())\n\t\t){\n\t\t\tthis.hp-=1;\n\t\t\tif(fig.hp === undefined)\n\t\t\t\tfig.isAlive = false;\n\t\t\telse\n\t\t\t\tfig.hp = fig.type != 3 ? 0 : fig.hp;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n  }\n  \n\ttrimMode(value){\n\t\tthis.mode = value < 0 ? Math.max(this.mode+value, 0) : Math.min(this.mode+value, 5);\n\t}\n\t\n\tshoot(height){\n\t\tconst b1x = this.left() + 5;\n\t\tconst b2x = this.right()- 5 - this._bulSprites[2].w;\n\t\tswitch(this.mode) {\n\t\t\tcase 0:\n\t\t\t\treturn [new Bullet(this.center() - this._bulSprites[2].w / 2, this.y, 0, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR)];\n\t\t\tcase 1:\n\t\t\t\treturn [\n\t\t\t\t\tnew Bullet(b1x, this.y, 0, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b2x, this.y, 0, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR)\n\t\t\t\t];\n\t\t\tcase 2:\n\t\t\t\treturn [\n\t\t\t\t\tnew Bullet(this.center() - this._bulSprites[2].w / 2, this.y, 0, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b1x, this.y, -1, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b2x, this.y, 1, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR)\n\t\t\t\t];\n\t\t\tcase 3:\n\t\t\t\treturn [\n\t\t\t\t\tnew Bullet(this.center() - this._bulSprites[3].w / 2, this.y, 0, -8, this._bulSprites[3], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b1x, this.y, -1, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b2x, this.y, 1, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR)\n\t\t\t\t];\n\t\t\tcase 4:\n\t\t\t\treturn [\n\t\t\t\t\tnew Bullet(this.center() - this._bulSprites[3].w / 2, this.y, 0, -8, this._bulSprites[3], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b1x, this.y, -1, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b2x, this.y, 1, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b1x, this.y, -2, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b2x, this.y, 2, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR)\n\t\t\t\t];\n\t\t\tcase 5:\n\t\t\t\treturn [\n\t\t\t\t\tnew Bullet(this.center() - this._bulSprites[3].w / 2, this.y, 0, -8, this._bulSprites[3], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b1x, this.y, -1, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b2x, this.y, 1, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b1x, this.y, -2, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b2x, this.y, 2, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b1x, this.y, -3, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR),\n\t\t\t\t\tnew Bullet(b2x, this.y, 3, -8, this._bulSprites[2], height, this.cnvsL, this.cnvsR)\n\t\t\t\t];\n\t\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n  move(step){\n\tif(step < 0 && this.x + step <= this.cnvsL \n\t|| step > 0 && this.right() + step >= this.cnvsR) return;\n\tthis.x += step;\n  }\n  \n  draw(ctx, time) {\n\tconst t = Math.ceil(time / 500) % 4;\n\tlet sp = t === 3 ? this._sprites[1] : this._sprites[t];\n\t\t  \n    ctx.drawImage(\n      sp.img,\n      sp.x, sp.y, sp.w, sp.h,\n      this.x, this.y, sp.w, sp.h\n    );\n  }\n}\n","export default class Alien {\n  constructor(x, y, vx, vy, hp, type, sprites, timeMark, cnvsL, cnvsR, cnvsH) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.type = type;\n\t\tthis.vx = vx;\n\t\tthis.vy = vy;\n\t\tthis._sprites = sprites;\n\t\tthis.w = Math.max.apply(Math, sprites.map(x=>x.w));\n\t\tthis.h = Math.max.apply(Math, sprites.map(x=>x.h));\n\t\tthis.timeMark = timeMark;\n\t\tthis.timeLastFire = 0;\n\t\tthis.hp = hp;\n\t\tthis.difHP = hp;\n\t\tthis.cnvsL = cnvsL;\n\t\tthis.cnvsR = cnvsR;\n\t\tthis.cnvsH = cnvsH;\n  }  \n\t\n\tisAlive(){\n\t\treturn this.hp > 0;\n\t}\n\t\n  left(){\n\t\treturn this.x;  \n  }\n  \n  top() {\n\t\treturn this.y;  \n  }\n\n  right(){\n\t\treturn this.x + this.w;  \n  }\n  \n  bottom(){\n\t\treturn this.y + this.h;  \n  }\n\t  \n  alienFire(time){\n\t  if (Math.ceil(time / 100) % 60 === this.timeMark\n\t  && time - this.timeLastFire > 2000){ //????\n\t\tthis.timeLastFire = time;\n\t\treturn true;\n\t  }\n\t  return false;\n  }\n  \n\tisInjured(){\n\t\tif(this.difHP > this.hp){\n\t\t\tthis.difHP = this.hp;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\t\n  intersects(fig) {\n\t\tif(\n\t\t\tthis.y < fig.bottom()\n\t\t\t&& this.x < fig.right()\n            && fig.x < this.right()\n            && (fig.y < this.bottom())\n\t\t){\n\t\t\tthis.hp-=1;\n\t\t\tif(fig.hp === undefined)\n\t\t\t\tfig.isAlive = false;\n\t\t\telse \n\t\t\t\tfig.hp-=1;\n\t\t\t\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n  }\n  \n  center(){\n\t\treturn this.x + this.w / 2;\n  }\n  \n  move(){\n\t\tif(this.x <= this.cnvsL || this.right() >= this.cnvsR)\n\t\t\tthis.vx = -this.vx;\n\t\tif(this.bottom() >= this.cnvsH && this.type != 3){\n\t\t\tthis.hp = 0;\n\t\t\treturn;\n\t\t}\n\t\tthis.x += this.vx;\n\t\tthis.y += this.vy;\n  }\t\n\t\n  draw(ctx, time) {\n\tconst t = Math.ceil(time / 500) % 4;\n\tlet sp;\n\tswitch (this.type){\n\t\tcase 0:\n        case 3:\n\t\t\tsp = t === 3 ? this._sprites[1] : this._sprites[t];\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tsp = this._sprites[t % 2];\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tconst shift = this.vx > 0 ? 3 : 0;\n\t\t\tsp = t === 3 ? this._sprites[shift + 1] : this._sprites[shift + t];\n\t\t\tbreak;\n\t}\n\t\t\n    ctx.drawImage(\n      sp.img,\n      sp.x, sp.y, sp.w, sp.h,\n      this.x, this.y, sp.w, sp.h\n    );\n  }\n}\n","export default class InputHandler {\n  constructor() {\n    this.down = {};\n  \tthis.pressed = {};\n  \tdocument.addEventListener(\"keydown\", e => {\n  \t\tthis.down[e.keyCode] = true;\n  \t});\n  \tdocument.addEventListener(\"keyup\", e => {\n  \t\tdelete this.down[e.keyCode];\n  \t\tdelete this.pressed[e.keyCode];\n  \t});\n  }\n\n  /**\n   * Returns whether a key is pressod down\n   * @param  {number} code the keycode to check\n   * @return {bool} the result from check\n   */\n  isDown(code) {\n  \treturn this.down[code];\n  }\n\n  /**\n   * Return wheter a key has been pressed\n   * @param  {number} code the keycode to check\n   * @return {bool} the result from check\n   */\n  isPressed(code) {\n  \t// if key is registred as pressed return false else if\n  \t// key down for first time return true else return false\n  \tif (this.pressed[code]) {\n  \t\treturn false;\n  \t} else if (this.down[code]) {\n  \t\treturn this.pressed[code] = true;\n  \t}\n  \treturn false;\n  }\n}\n","import Alien from './alien'\nimport Bullet from './bullet'\n\nexport default class Level {\n\tconstructor(typeLevel,\n\tcountAlien,\n\talienHP,\n\tmovementSpeedVX,\n\tmovementSpeedVY,\n\talienSprites,\n\tbulletSprite,\n\tcnvsL,\n\tcnvsR,\n\tcnvsH){\n\t\tthis.typeLevel = typeLevel;\n\t\tthis.countAlien = countAlien; \n\t\tthis.alienHP = alienHP; \n\t\tthis.movementSpeedVX = movementSpeedVX;\n\t\tthis.movementSpeedVY = movementSpeedVY;\n\t\tthis.alienSprites = alienSprites;\n\t\tthis.bulletSprite = bulletSprite;\n\t\tthis.mark = 0;\n\t\tthis.cnvsL = cnvsL;\n\t\tthis.cnvsR = cnvsR;\n\t\tthis.cnvsH = cnvsH;\n\t\tthis.isEnd = false;\n\n\t\tthis.isCDbyAlien = typeLevel == \"falling\" || typeLevel == \"snake\" || typeLevel == \"boss\";\n\n\t\tthis.allAliens = [];\n\t\tthis.aliens = [];\n\n\t\tthis.idx = 0;\n\t\tthis.lastTick = 0;\n\t\t\n\t\tthis.tempYforBoss = 0;\n\t\tthis.attackBoss = false;\n\t\tthis.tempSpeedVXforBoss = 0;\n\t}\n\n\tgetMark(step = 17){\n\t\tthis.mark = (this.mark + step) % 60;\n\t\treturn this.mark;\n\t}\n\n\trandomX() {\n\t\tlet rand = this.cnvsL + Math.random() * ((this.cnvsR - 50) - this.cnvsL);\n\t\treturn Math.floor(rand);\n\t}\n\n\tconstructorLevel(){\n\t\tlet typeForm = 0;\n\t\tswitch(this.typeLevel){\n\t\t\tcase \"snake\":\n\t\t\t\ttypeForm = 2;\n\t\t\tcase \"formation\":\n\t\t\tfor (let k = 0; k < this.alienSprites.length; ++k){\n\t\t\t\tfor (let i = 0; i < this.countAlien; ++i){\n\t\t\t\t\tlet alienX = this.cnvsL + 40;\n\t\t\t\t\tlet alienY = 40 + (k*this.countAlien+i)*50;\n\t\t\t\t\twhile (alienX + 60 < this.cnvsR){\n\t\t\t\t\t\tthis.aliens.push(new Alien(alienX, alienY, this.movementSpeedVX, this.movementSpeedVY,\n\t\t\t\t\t\tthis.alienHP, typeForm, this.alienSprites[k], this.getMark(), this.cnvsL, this.cnvsR, this.cnvsH));\n\t\t\t\t\t\talienX+=50;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\n\t\t\tcase \"falling\":\n\t\t\tfor (let k = 0; k < this.alienSprites.length; ++k){\n\t\t\t\tfor (let i = 0; i < this.countAlien; ++i){\n\t\t\t\t\tlet alienX = this.randomX();\n\t\t\t\t\tlet alienY = 5;\n\t\t\t\t\tthis.allAliens.push(new Alien(alienX, alienY, this.movementSpeedVX, this.movementSpeedVY,\n\t\t\t\t\t\tthis.alienHP, 1, this.alienSprites[k], this.getMark(), this.cnvsL, this.cnvsR, this.cnvsH));\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet ret = this.randomX() % 10;\n\t\t\tthis.aliens = this.allAliens.slice(this.idx, this.idx + ret);\n\t\t\tthis.idx += ret;\n\t\t\tbreak;\n\n      case \"boss\":\n\t\t\tlet tempXforBoss = (this.cnvsL + this.cnvsR)/2;\n\t\t\tthis.tempYforBoss = this.cnvsH/4;\n      this.aliens.push(new Alien(tempXforBoss, this.tempYforBoss, this.movementSpeedVX, 0,\n\t\t\t\tthis.alienHP, 3, this.alienSprites[0], this.getMark(30), this.cnvsL, this.cnvsR, this.cnvsH));\n      break;\n\n\t\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tshoot(time){\n\t\tlet bullet = [];\n\n\t\tswitch(this.typeLevel){\n\t\t\tcase \"formation\":\n                let alienIsReady = this.aliens.filter(x=>x.alienFire(time));\n\t\t\t\talienIsReady.forEach(x=>{\n\t\t\t\t    const bulX = x.center();\n\t\t\t\t    const bulY = x.bottom();\n\t\t\t\t    bullet.push(new Bullet(bulX - this.bulletSprite.w / 2, bulY, 0, 8, this.bulletSprite, this.cnvsH, this.cnvsL, this.cnvsR));\n\t\t\t\t});\n\t\t\tbreak;\n\n\t\t\tcase \"falling\":\n\t\t\tbreak;\n\n\t\t\tcase \"snake\":\n\t\t\t\tlet alienInjured = this.aliens.filter(x=>x.isInjured());\n\t\t\t\talienInjured.forEach(x=>{\n\t\t\t\t\tconst bulX = x.center();\n\t\t\t\t\tconst bulY = x.bottom();\n\t\t\t\t\tbullet.push(new Bullet(bulX - this.bulletSprite.w / 2, bulY, 0, 8, this.bulletSprite, this.cnvsH, this.cnvsL, this.cnvsR));\n\t\t\t\t});\n\t\t\tbreak;\n\n      case \"boss\":\n\t\t\t\tif(this.aliens.length == 0) break;\n      \tlet boss = this.aliens[0];\n        const bul1X = boss.left();\n        const bul2X = boss.right() - this.bulletSprite.w;\n\t\t\t\tconst bulY = boss.bottom();\n        if(boss.alienFire(time) || boss.isInjured()){\n\t\t\t\t\tbullet.push(new Bullet(bul1X, bulY, 0, 8, this.bulletSprite, this.cnvsH, this.cnvsL, this.cnvsR));\n        \tbullet.push(new Bullet(bul2X, bulY, 0, 8, this.bulletSprite, this.cnvsH, this.cnvsL, this.cnvsR));\n        }\n      break;\n\t\t}\n\t\treturn bullet;\n\t}\n\n\tgetAlien(){\n\t\tthis.aliens = this.aliens.filter(x=>x.isAlive());\n\t\tif(this.typeLevel == \"falling\"){\n\t\t\tthis.isEnd = this.aliens.length == 0 && this.idx >= this.allAliens.length;\n\t\t}\n\t\telse\n\t\t\tthis.isEnd = this.aliens.length == 0;\n\t}\n\n\tmoveAlien(){\n\t\tif(this.typeLevel == \"boss\"){}\n\t\tthis.aliens.forEach(x => x.move());\n\t}\n\n\tupdate(time, shipLeft, shipRight){\n\t\tswitch(this.typeLevel){\n\t\t\tcase \"formation\":\n\t\t\tbreak;\n\t\t\tcase \"falling\":\n\t\t\t\tif(this.idx < this.allAliens.length && time - this.lastTick > 1000){\n\t\t\t\t\tlet ret = this.randomX() % 6 + 1;\n\t\t\t\t\tlet lastIdx = Math.min(this.allAliens.length, ret + this.idx);\n\t\t\t\t\tthis.aliens = this.aliens.concat(this.allAliens.slice(this.idx, lastIdx));\n\t\t\t\t\tthis.idx += ret;\n\t\t\t\t\tthis.lastTick = time;\n\t\t\t\t}\n\n\t\t\tbreak;\n      case \"boss\":\n\t\t\t\tlet boss = this.aliens[0];\n\t\t\t\tif(shipLeft <= boss.center() && boss.center() < shipRight && boss.y == this.tempYforBoss){\n\t\t\t\t\tthis.tempSpeedVXforBoss = boss.vx;\n\t\t\t\t\tthis.aliens[0].vx = 0;\n\t\t\t\t\tthis.aliens[0].vy = this.movementSpeedVY;\n\t\t\t\t\tthis.attackBoss = true; \n\t\t\t\t} else if(boss.bottom() >= this.cnvsH){\n\t\t\t\t\tthis.aliens[0].vx = 0;\n\t\t\t\t\tthis.aliens[0].vy = -this.movementSpeedVY;\n\t\t\t\t} else if(boss.top() < this.tempYforBoss && this.attackBoss){\n\t\t\t\t\tthis.aliens[0].y = this.tempYforBoss;\n\t\t\t\t\tthis.aliens[0].vx = this.tempSpeedVXforBoss;\n\t\t\t\t\tthis.aliens[0].vy = 0;\n\t\t\t\t\tthis.attackBoss = false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\t\tthis.moveAlien();\n\t}\n\n\tdrawAlien(context, time){\n\t\tthis.aliens.forEach(a => a.draw(context, time));\n\t}\n}\n","export default class Gift {\n\tconstructor(x, y, vy, sprite){\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.w = sprite.w;\n\t\tthis.h = sprite.h;\n\t\tthis.vy = vy;\n\t\tthis.sprite = sprite;\n\t\tthis.isAlive = true;\n\t}\n\t\n\tleft() {\n\t\treturn this.x;\n\t}\n\t\n\tright() {\n\t\treturn this.x + this.w;\n\t}\n\t\n\ttop() {\n\t\treturn this.y;\n\t}\n\t\n\tbottom() {\n\t\treturn this.y + this.h;\n\t}\n\t\n\tmove(cnvsB) {\n\t\tif(this.bottom() >= cnvsB)\n\t\t\tthis.isAlive = false;\n\t\telse\n\t\t\tthis.y += this.vy;\n\t}\n\t\n\tdraw(ctx) {\n    ctx.drawImage(\n      this.sprite.img,\n      this.sprite.x, this.sprite.y, this.w, this.h,\n      this.x, this.y, this.w, this.h\n    );\n  }\n\t\n\tintersects(fig) {\n\t\tif(\n\t\t\tthis.y < fig.bottom()\n\t\t\t&& this.x < fig.right()\n      && fig.x < this.right()\n      && (fig.y < this.bottom())\n\t\t){\n\t\t\tthis.isAlive = false;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n  }\n}","const config = {\n\tlevels: [\n\t//1\n\t{\n\t\ttypeLevel: \"formation\",\n\t\ttypeAliens: [0],\n\t\tcountAlien: 2,\n\t\tmovementSpeedVX: 1,\n\t\tmovementSpeedVY: 0,\n\t\talienHP: 1,\n\t\ttypeBullet: 0\n\t},\n\t//2\n\t{\n\t\ttypeLevel: \"formation\",\n\t\ttypeAliens: [0, 1],\n\t\tcountAlien: 2,\n\t\tmovementSpeedVX: 1,\n\t\tmovementSpeedVY: 0,\n\t\talienHP: 1,\n\t\ttypeBullet: 0\n\t},\n\t//3\n\t{\n\t\ttypeLevel: \"falling\",\n\t\ttypeAliens: [5],\n\t\tcountAlien: 60,\n\t\tmovementSpeedVX: 0,\n\t\tmovementSpeedVY: 8,\n\t\talienHP: 3,\n\t\ttypeBullet: 0\n\t},\n\t//4\n\t{\n\t\ttypeLevel: \"snake\",\n\t\ttypeAliens: [6],\n\t\tcountAlien: 2,\n\t\tmovementSpeedVX: 2,\n\t\tmovementSpeedVY: 0.2,\n\t\talienHP: 2,\n\t\ttypeBullet: 0\n\t},\n\t//5\t\n\t{\n\t\ttypeLevel: \"formation\",\n\t\ttypeAliens: [0, 1, 2],\n\t\tcountAlien: 2,\n\t\tmovementSpeedVX: 1,\n\t\tmovementSpeedVY: 0,\n\t\talienHP: 1,\n\t\ttypeBullet: 0\n\t},\n\t//6\t\n\t{\n\t\ttypeLevel: \"falling\",\n\t\ttypeAliens: [5, 3],\n\t\tcountAlien: 40,\n\t\tmovementSpeedVX: 0,\n\t\tmovementSpeedVY: 9,\n\t\talienHP: 3,\n\t\ttypeBullet: 0\n\t},\n\t//7\t\n\t{\n\t\ttypeLevel: \"snake\",\n\t\ttypeAliens: [6, 7],\n\t\tcountAlien: 3,\n\t\tmovementSpeedVX: 2.3,\n\t\tmovementSpeedVY: 0.2,\n\t\talienHP: 2,\n\t\ttypeBullet: 0\n\t},\n\t//8\t\n\t{\n\t\ttypeLevel: \"formation\",\n\t\ttypeAliens: [0, 1, 2],\n\t\tcountAlien: 3,\n\t\tmovementSpeedVX: 2,\n\t\tmovementSpeedVY: 0,\n\t\talienHP: 1,\n\t\ttypeBullet: 0\n\t},\n\t//9\t\n\t{\n\t\ttypeLevel: \"falling\",\n\t\ttypeAliens: [5, 3, 4],\n\t\tcountAlien: 30,\n\t\tmovementSpeedVX: 0,\n\t\tmovementSpeedVY: 10,\n\t\talienHP: 3,\n\t\ttypeBullet: 0\n\t},\n    //10\n\t{\n\t\ttypeLevel: \"boss\",\n\t\ttypeAliens: [8],\n\t\tcountAlien: 1,\n\t\tmovementSpeedVX: 3,\n\t\tmovementSpeedVY: 15,\n\t\talienHP: 35,\n\t\ttypeBullet: 1\n\t}\n\t]\n}\n\nexport { config };\n","import Sprite from './sprite'\nimport Ship from './ship'\nimport Bullet from './bullet'\nimport Alien from './alien'\nimport InputHandler from './input-handler'\nimport Level from './level'\nimport Gift from './gift'\n\nimport assetShipPath from '../assets/ship.png'\nimport assetAlienPath from '../assets/aliens.png'\n\nimport { config } from './conf'\n\nlet assetShip;\nlet assetsAliens;\n\nconst sprites = {\n  aliens: [],\n  ship: [],\n  bulletsShip: [],\n  bulletsAliens: [],\n\tgift: null\n};\nconst gameState = {\n  startRun: null,\n  cnvsBorder: 450,\n  bullets: [],\n  bulletsAlien: [],\n  aliens: [],\n  ship: null,\n  levels: [],\n  nextLevel: false,\n  numberLevel: 0,\n  startGame: true,\n  gameOver: false,\n\tplayerWin:false,\n\tscore: 0,\n\tscoreLastBonus: 0,\n\tbonus: [],\n\tcatchedBonus: 0\n};\n\nfunction onPressedKey(e){\n\tif(e.keyCode === 13){\n\t\tif(gameState.startGame){\n\t\t\tgameState.startGame = false;\n\t\t\tlevelLoop();\n\t\t\treturn;\n\t\t}\n\t\tif(gameState.nextLevel){\n\t\t\t\tgameState.numberLevel+=1;\n\t\t\t\tgameState.nextLevel = false;\n\t\t\t\tlevelLoop();\n\t\t\t\treturn;\n\t\t}\n\t\tif(gameState.playerWin || gameState.gameOver){\n\t\t\twindow.location.reload();\n\t\t}\n\t}\n}\n\nlet mark = 0;\nconst inputHandler = new InputHandler();\n\nexport function preload(nextInit){\n\tassetsAliens = new Image();\n\tassetsAliens.addEventListener(\"load\", () => {\n\t\n\tsprites.bulletsAliens = [\n\t\tnew Sprite(assetsAliens,  258, 20, 6, 16), new Sprite(assetsAliens,  279, 19, 11, 19)\n\t];\n\n\tsprites.aliens = [\n\t\t[new Sprite(assetsAliens,  2, 2, 47, 39), new Sprite(assetsAliens,  51, 2, 47, 39), new Sprite(assetsAliens,  99, 2, 44, 39)], //for 1, 2, 5, 8\n\t\t[new Sprite(assetsAliens,  1, 48, 47, 45), new Sprite(assetsAliens,  50, 48, 47, 45), new Sprite(assetsAliens,  98, 48, 44, 45)], // for 2, 5, 8\n\t\t[new Sprite(assetsAliens,  156, 146, 47, 45), new Sprite(assetsAliens,  204, 146, 47, 45), new Sprite(assetsAliens,  256, 146, 44, 45)], //for 5, 8 (complex)\n\t\t[new Sprite(assetsAliens,  152, 11, 47, 33), new Sprite(assetsAliens,  204, 11, 44, 33)], // for 6, 9\n\t\t[new Sprite(assetsAliens,  152, 53, 47, 33), new Sprite(assetsAliens,  204, 53, 44, 33)], // for 9\n\t\t[new Sprite(assetsAliens,  152, 93, 47, 33), new Sprite(assetsAliens,  204, 93, 44, 33)], // for 3, 6, 9\n\t\t[\n\t\t\tnew Sprite(assetsAliens,  10, 101, 37, 39), new Sprite(assetsAliens,  58, 101, 37, 39), new Sprite(assetsAliens,  12, 193, 37, 43), //for 4, 7\n\t\t\tnew Sprite(assetsAliens,  1, 148, 38, 40), new Sprite(assetsAliens,  53, 148, 38, 40), new Sprite(assetsAliens,  5, 241, 38, 43)\n\t\t], \n\t\t[\n\t\t\tnew Sprite(assetsAliens,  106, 101, 37, 39), new Sprite(assetsAliens,  61, 195, 37, 39), new Sprite(assetsAliens,  109, 195, 37, 43), //for 7\n\t\t\tnew Sprite(assetsAliens,  97, 147, 38, 40), new Sprite(assetsAliens,  56, 243, 38, 40), new Sprite(assetsAliens,  102, 243, 38, 43)\n\t\t],\n\t\t[new Sprite(assetsAliens,  306, 99, 92, 92), new Sprite(assetsAliens,  306, 191, 92, 92), new Sprite(assetsAliens,  306, 4, 92, 92)] // for 10\n    ]  \n  });\n  \n\tassetsAliens.src = assetAlienPath;\n  \n\tassetShip = new Image();\n\tassetShip.addEventListener(\"load\", () => {\n    sprites.ship = [new Sprite(assetShip, 2, 6, 55, 96), new Sprite(assetShip, 59, 6, 55, 96), new Sprite(assetShip, 117, 6, 55, 96)];\n    sprites.bulletsShip = [\n\t\tnew Sprite(assetShip, 178, 3, 5, 13), new Sprite(assetShip, 178, 18, 17, 14), \n\t\tnew Sprite(assetShip, 179, 35, 10, 17), new Sprite(assetShip, 178, 53, 23, 24)\n\t];\n\t\tsprites.gift = new Sprite(assetShip, 202, 46, 31, 34);\n\tnextInit();\n  });\n\tassetShip.src = assetShipPath;\n}\n\nexport function initGame(startRun, canvas) {\n\tgameState.cnvsBorder = ((canvas.width + 100) / 3 + 260)/2;\n\t\n\t//load levels\n\tconfig.levels.forEach(level => {\n\t\tlet alSp = [];\n\t\tlevel.typeAliens.forEach(x=>alSp.push(sprites.aliens[x]));\n\t\tgameState.levels.push(\n\t\tnew Level(level.typeLevel, level.countAlien, level.alienHP, \n\t\t\tlevel.movementSpeedVX, level.movementSpeedVY, alSp, sprites.bulletsAliens[level.typeBullet], \n\t\t\tcanvas.width/2 - gameState.cnvsBorder, canvas.width/2 + gameState.cnvsBorder, canvas.height));\n\t});\n\t\n\t//init ship\n\tgameState.ship = new Ship(\n\t\tcanvas.width/2 - gameState.cnvsBorder + 10, canvas.height - 200,\n\t\tsprites.ship, sprites.bulletsShip, canvas.width/2 - gameState.cnvsBorder, canvas.width/2 + gameState.cnvsBorder \n\t);\n\t\n\tgameState.startRun = startRun;\n\t\t\n\twindow.addEventListener('keydown', onPressedKey, true);\n}\n\nfunction levelLoop(){\n\tgameState.levels[gameState.numberLevel].constructorLevel();\n\tgameState.ship.hp += 1;\n\tgameState.bullets = [];\n\tgameState.bulletsAlien = [];\n\tgameState.bonus = [];\n\tgameState.startRun();\n}\n\nfunction randomX(cnvsL, cnvsR) {\n\t\tlet rand = cnvsL + Math.random() * ((cnvsR - 50) - cnvsL);\n\t\treturn Math.floor(rand);\n\t}\n\nexport function update(time, stopGame, canvas) {\n\tif (inputHandler.isDown(37)) { // Left\n\t\tgameState.ship.move(-4);\n\t}\n\n\tif (inputHandler.isDown(39)) { // Right\n\t\tgameState.ship.move(4);\n\t}\n\n\tif (inputHandler.isPressed(32)) { // Space\n\t\tgameState.bullets = gameState.bullets.concat(gameState.ship.shoot(canvas.height));\n\t}\n  \n\t\tif(gameState.scoreLastBonus != Math.floor(gameState.score / 70)){\n\t\tgameState.bonus.push(new Gift(\n\t\trandomX(canvas.width/2 - gameState.cnvsBorder, canvas.width/2 + gameState.cnvsBorder),\n\t\t40, 6, sprites.gift));\n\t\tgameState.scoreLastBonus = Math.floor(gameState.score / 70);\n\t}\n\t\n\tgameState.bonus.forEach(g=>{\n\t\tif(g.intersects(gameState.ship)){\n\t\t\tgameState.catchedBonus+=1;\n\t\t\tif(gameState.catchedBonus % 3 == 0)\n\t\t\t\tgameState.ship.trimMode(1);\n\t\t\tif(gameState.catchedBonus % 7 == 0)\n\t\t\t\tgameState.ship.hp+=1;\n\t\t}\n\t\tg.move(canvas.height);\n\t});\n\t\n\tlet level = gameState.levels[gameState.numberLevel];\n\t\n\tgameState.bulletsAlien = gameState.bulletsAlien.concat(level.shoot(time));\n\t\n  gameState.bullets.forEach(b => { \n\t\tb.update(time);\n\t\tlevel.aliens.forEach(x=>{\n\t\t\tif(x.intersects(b))\t\n\t\t\t\tgameState.score += 5;\n\t\t});\n  });\n  \n  level.getAlien();\n  \n\tif(level.isCDbyAlien){\n\t\tlevel.aliens.forEach(x=> {\n\t\t\tif(gameState.ship.intersects(x))\n\t\t\t\tgameState.ship.trimMode(-2);\n\t\t})\n\t}\n\t\t\n  gameState.bulletsAlien.forEach(b => { \n\t\tb.update(time);\n\t\tif(gameState.ship.intersects(b)){\n\t\t\tgameState.ship.trimMode(-1);\n\t\t};\n  });\n  \n  if (!gameState.ship.isAlive()){\n\t\tgameState.gameOver = true;\n\t\tstopGame();\n  }\n  \n   if (level.isEnd){\n\t   if(gameState.numberLevel+1 == gameState.levels.length){\n\t\t  gameState.playerWin = true; \n\t\t} else {\n\t\t\tgameState.nextLevel = true;\n\t\t\tstopGame();\n\t\t}\n   }\n  \n\tlevel.update(time, gameState.ship.left(), gameState.ship.right());\n\n  gameState.bulletsAlien = gameState.bulletsAlien.filter(b => b.isAlive);\n  gameState.bullets = gameState.bullets.filter(b => b.isAlive);\n\tgameState.bonus = gameState.bonus.filter(g => g.isAlive);\n}\n\nfunction drawSwitchLevel(canvas){\n\tconst context = canvas.getContext('2d');\n\tcontext.font = \"64px serif\";\n\tcontext.fillStyle = \"#FFFFFF\";\n\tcontext.fillText(\"Level \" + (gameState.numberLevel+2), canvas.width/2 - 110, canvas.height/2-150);\n\tcontext.font = \"48px serif\";\n\tcontext.fillText(\"Press Enter for start\", canvas.width/2 - 185, canvas.height/2);\n}\n\nfunction drawWin(canvas){\n\tconst context = canvas.getContext('2d');\n\tcontext.font = \"64px serif\";\n\tcontext.fillStyle = \"#FFFFFF\";\n\tcontext.fillText(\"Congratulation!\", canvas.width/2 - 200, canvas.height/2-150);\n\tcontext.fillText(\"You won\", canvas.width/2 - 120, canvas.height/2 - 70);\n\tcontext.font = \"48px serif\";\n\tcontext.fillText(\"Your score: \" + gameState.score, canvas.width/2 - 155, canvas.height/2 - 10);\n\tcontext.fillText(\"Press Enter for repeat\", canvas.width/2 - 200, canvas.height/2 + 80);\n}\n\nfunction drawGameOver(canvas){\n\tconst context = canvas.getContext('2d');\n\tcontext.font = \"64px serif\";\n\tcontext.fillStyle = \"#FFFFFF\";\n\tcontext.fillText(\"You died\", canvas.width/2 - 120, canvas.height/2 - 150);\n\tcontext.font = \"48px serif\";\n\tcontext.fillText(\"Your score: \" + gameState.score, canvas.width/2 - 155, canvas.height/2 - 90);\n\tcontext.fillText(\"Level: \" + (gameState.numberLevel+1), canvas.width/2 - 80, canvas.height/2 - 30);\n\tcontext.fillText(\"Press Enter for repeat\", canvas.width/2 - 200, canvas.height/2 + 60);\n}\n\nexport function draw(canvas, time) {\n  const context = canvas.getContext('2d');\n  context.clearRect(0, 0, canvas.width, canvas.height);\n\n\tif(gameState.nextLevel){\n\t\tdrawSwitchLevel(canvas);\n\t\treturn;\n\t}\n\t\n\tif(gameState.playerWin){\n\t\tdrawWin(canvas);\n\t\treturn;\n\t}\n\t\n\tif(gameState.gameOver){\n\t\tdrawGameOver(canvas);\n\t\treturn;\n\t}\n\t\n\tlet cnvsL = canvas.width/2 - gameState.cnvsBorder;\n\tlet cnvsR = canvas.width/2 + gameState.cnvsBorder;\n\t\n\t//borders\n\tcontext.beginPath();\n\tcontext.strokeStyle = \"#FFFFFF\";\n\tcontext.moveTo(cnvsL, 0);\n\tcontext.lineTo(cnvsL, canvas.height);\n\tcontext.moveTo(cnvsR, 0);\n\tcontext.lineTo(cnvsR, canvas.height);\n\tcontext.closePath();\n\tcontext.stroke();\n\t\n\t//info\n\tcontext.font = \"48px serif\";\n\tcontext.fillStyle = \"#FFFFFF\";\n\tcontext.fillText(\"Level \" + (gameState.numberLevel + 1), cnvsL/2 - 65, 150);\n\tcontext.font = \"40px serif\";\n\tcontext.fillText(\"Score \" + gameState.score, cnvsL/2 - 65, 200);\n\t\n\tcontext.drawImage(\n      sprites.gift.img,\n      sprites.gift.x, sprites.gift.y, sprites.gift.w, sprites.gift.h,\n      (cnvsR + canvas.width)/2 - sprites.gift.w - 10, canvas.height - 3*sprites.ship[0].h, sprites.gift.w, sprites.gift.h\n  );\n\t\n\tcontext.fillText(gameState.catchedBonus, (cnvsR + canvas.width)/2 + sprites.gift.w - 10, canvas.height - 2.65 * sprites.ship[0].h);\n\t\n\tcontext.drawImage(\n    sprites.ship[0].img,\n    sprites.ship[0].x, sprites.ship[0].y, sprites.ship[0].w, sprites.ship[0].h,\n    (cnvsR + canvas.width)/2 - sprites.ship[0].w + 1, canvas.height - 2*sprites.ship[0].h, sprites.ship[0].w, sprites.ship[0].h\n  );\n\t\n\tcontext.fillText(gameState.ship.hp, (cnvsR + canvas.width)/2 + sprites.gift.w - 10, canvas.height - 1.3 * sprites.ship[0].h);\n\t\n\t\n  gameState.levels[gameState.numberLevel].drawAlien(context, time);\n\tgameState.bonus.forEach(g => g.draw(context));\n  gameState.ship.draw(context, time);\n  gameState.bullets.forEach(b => b.draw(context));\n  gameState.bulletsAlien.forEach(b => b.draw(context));\n}\n","import {\n  preload,\n  initGame,\n  update,\n  draw\n} from './game'\n\nconst canvas = document.getElementById(\"cnvs\");\ncanvas.width = window.innerWidth;\ncanvas.height = window.innerHeight;\n\nconst tickLength = 15; //ms\nlet lastTick;\nlet lastRender;\nlet stopCycle;\n\nfunction run(tFrame) {\n    stopCycle = window.requestAnimationFrame(run);\n\n    const nextTick = lastTick + tickLength;\n    let numTicks = 0;\n\n    if (tFrame > nextTick) {\n        const timeSinceTick = tFrame - lastTick;\n        numTicks = Math.floor(timeSinceTick / tickLength);\n    }\n\n    for (let i = 0; i < numTicks; i++) {\n        lastTick = lastTick + tickLength;\n        update(lastTick, stopGame, canvas);\n    }\n\n    draw(canvas, tFrame);\n    lastRender = tFrame;\n}\n\nfunction stopGame() {\n   window.cancelAnimationFrame(stopCycle);\n}\n\nfunction onPreloadComplete() {\n  lastTick = performance.now();\n  lastRender = lastTick;\n  stopCycle = null;\n  run();\n}\n\nfunction drawGameStart(context){\n\tcontext.font = \"64px serif\";\n\tcontext.fillStyle = \"#FFFFFF\";\n\tcontext.fillText(\"Space Invaders\", canvas.width/2 - 195, canvas.height/2-170);\n\tcontext.font = \"48px serif\";\n\tcontext.fillText(\"(Special Edition)\", canvas.width/2 - 150, canvas.height/2 - 110);\n\tcontext.fillText(\"Press Enter for start\", canvas.width/2 - 185, canvas.height/2);\n}\n\nfunction nextInit(){\n\tdrawGameStart(canvas.getContext('2d'));\n\tinitGame(onPreloadComplete, canvas);\n}\n\npreload(nextInit);"]}